!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@playkit-js/playkit-js"),require("shaka-player")):"function"==typeof define&&define.amd?define("dash",["playkit-js","shaka-player"],t):"object"==typeof exports?exports.dash=t(require("@playkit-js/playkit-js"),require("shaka-player")):(e.playkit=e.playkit||{},e.playkit.dash=t(e.playkit.core,e.shaka))}(window,(function(e,t){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=6)}([function(t,i){t.exports=e},function(e,i){e.exports=t},function(e){e.exports=JSON.parse('{"shakaConfig":{"streaming":{"ignoreTextStreamFailures":true,"bufferingGoal":60,"alwaysStreamText":true},"abr":{"enabled":true,"restrictions":{}}},"forceRedirectExternalStreams":false,"trackEmsgEvents":true,"switchDynamicToStatic":false}')},function(e,t,i){(t=i(5)(!1)).push([e.i,".shaka-text-container {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  pointer-events: none;\n  width: 100%;\n  min-width: 48px;\n  transition: bottom cubic-bezier(0.4, 0, 0.6, 1) 0.1s;\n  transition-delay: 0s;\n  font-size: 20px;\n  line-height: 1.4;\n  color: #fff;\n  font-family: Roboto-Regular, Roboto, sans-serif, TengwarTelcontar;\n}\n.shaka-text-container span.shaka-text-wrapper {\n  display: inline;\n  background: 0 0;\n  text-align: center;\n}\n\n:fullscreen .shaka-text-container {\n  font-size: 4.4vmin;\n}\n\n:-webkit-full-screen .shaka-text-container {\n  font-size: 4.4vmin;\n}\n\n:-moz-full-screen .shaka-text-container {\n  font-size: 4.4vmin;\n}\n\n:-ms-fullscreen .shaka-text-container {\n  font-size: 4.4vmin;\n}\n",""]),e.exports=t},function(e,t,i){"use strict";var r,n=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),s=[];function o(e){for(var t=-1,i=0;i<s.length;i++)if(s[i].identifier===e){t=i;break}return t}function c(e,t){for(var i={},r=[],n=0;n<e.length;n++){var a=e[n],c=t.base?a[0]+t.base:a[0],u=i[c]||0,l="".concat(c," ").concat(u);i[c]=u+1;var h=o(l),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==h?(s[h].references++,s[h].updater(d)):s.push({identifier:l,updater:_(d,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var n=i.nc;n&&(r.nonce=n)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var s=a(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var l,h=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function d(e,t,i,r){var n=i?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,n);else{var a=document.createTextNode(n),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(a,s[t]):e.appendChild(a)}}function f(e,t,i){var r=i.css,n=i.media,a=i.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var g=null,m=0;function _(e,t){var i,r,n;if(t.singleton){var a=m++;i=g||(g=u(t)),r=d.bind(null,i,a,!1),n=d.bind(null,i,a,!0)}else i=u(t),r=f.bind(null,i,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var i=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<i.length;r++){var n=o(i[r]);s[n].references--}for(var a=c(e,t),u=0;u<i.length;u++){var l=o(i[u]);0===s[l].references&&(s[l].updater(),s.splice(l,1))}i=a}}}},function(e,t,i){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i=e[1]||"",r=e[3];if(!r)return i;if(t&&"function"==typeof btoa){var n=(s=r,o=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(c," */")),a=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[i].concat(a).concat([n]).join("\n")}var s,o,c;return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,r){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(r)for(var a=0;a<this.length;a++){var s=this[a][0];null!=s&&(n[s]=!0)}for(var o=0;o<e.length;o++){var c=[].concat(e[o]);r&&n[c[0]]||(i&&(c[2]?c[2]="".concat(i," and ").concat(c[2]):c[2]=i),t.push(c))}},t}},function(e,t,i){"use strict";i.r(t),i.d(t,"VERSION",(function(){return X})),i.d(t,"NAME",(function(){return Z}));var r,n,a=i(0),s=i(1),o=i.n(s);var c,u,l,h,d,f=(n=r=function(){function e(){}return e.isConfigured=function(e,t){return a.DrmScheme.WIDEVINE===t.keySystem&&!!e.find((function(e){return e.scheme===t.keySystem}))},e.canPlayDrm=function(t){return e._logger.debug("Can play DRM scheme of: "+a.DrmScheme.WIDEVINE),!!t.find((function(e){return e.scheme===a.DrmScheme.WIDEVINE}))},e.setDrmPlayback=function(t,i){e._logger.debug("Sets drm playback");var r,n,s=a.Env.browser.name,o=i.find((function(e){return e.scheme===a.DrmScheme.WIDEVINE}));o&&(t.drm={servers:(r={},r[a.DrmScheme.WIDEVINE]=o.licenseUrl,r),advanced:{}},"Chrome"===s&&(t.drm.advanced=((n={})[a.DrmScheme.WIDEVINE]={videoRobustness:"SW_SECURE_CRYPTO",audioRobustness:"SW_SECURE_CRYPTO"},n)))},e}(),c=r,u="_logger",l=Object(a.getLogger)("Widevine"),u in c?Object.defineProperty(c,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):c[u]=l,n);var g=(d=h=function(){function e(){}return e.isConfigured=function(e,t){return a.DrmScheme.PLAYREADY===t.keySystem&&!!e.find((function(e){return e.scheme===t.keySystem}))},e.canPlayDrm=function(t){return e._logger.debug("Can play DRM scheme of: "+a.DrmScheme.PLAYREADY),!!t.find((function(e){return e.scheme===a.DrmScheme.PLAYREADY}))},e.setDrmPlayback=function(t,i){e._logger.debug("Sets drm playback");var r,n=i.find((function(e){return e.scheme===a.DrmScheme.PLAYREADY}));n&&(t.drm={servers:(r={},r[a.DrmScheme.PLAYREADY]=n.licenseUrl,r)})},e}(),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(h,"_logger",Object(a.getLogger)("PlayReady")),d),m=i(2),_=i(4),p=i.n(_),v=i(3),y=i.n(v),T={insert:"head",singleton:!1};p()(y.a,T),y.a.locals;function b(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(e){this._media=P.parseAttr(e,A.AttributeTypes.MEDIA),this._startNumber=P.parseAttr(e,A.AttributeTypes.START_NUMBER,P.parseInt,1),this._duration=P.parseAttr(e,A.AttributeTypes.DURATION,P.parseFloat),this._timescale=P.parseAttr(e,A.AttributeTypes.TIMESCALE,P.parsePositiveInt,1),this._presentationTimeOffset=P.parseAttr(e,A.AttributeTypes.PRESENTATION_TIME_OFFSET,P.parseInt,0),this._endNumber=P.parseAttr(e,A.AttributeTypes.END_NUMBER,P.parsePositiveInt)}var t,i,r;return t=e,(i=[{key:"media",get:function(){return this._media}},{key:"startNumber",get:function(){return this._startNumber}},{key:"duration",get:function(){return this._duration}},{key:"timescale",get:function(){return this._timescale}},{key:"presentationTimeOffset",get:function(){return this._presentationTimeOffset}},{key:"endNumber",get:function(){return this._endNumber}}])&&b(t.prototype,i),r&&b(t,r),e}();!function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(k,"MediaTemplateType",{REPRESENTATION:"$RepresentationID$",NUMBER:"$Number$",BANDWIDTH:"$Bandwidth$",TIME:"$Time$"});var E=function(e,t){var i=t.id,r=t.index,n=t.bitrate,a=t.time,s=e.match(/\$([a-zA-Z]+)\$/g),o=function(e,t,i){return i?e.replace(t,i):e};return s&&s.forEach((function(t){switch(t){case k.MediaTemplateType.REPRESENTATION:e=o(e,t,i);break;case k.MediaTemplateType.NUMBER:e=o(e,t,r);break;case k.MediaTemplateType.BANDWIDTH:e=o(e,t,n);break;case k.MediaTemplateType.TIME:e=o(e,t,a)}})),e},S=function(e){return TextDecoder?(new TextDecoder).decode(new Uint8Array(e)):null},A={TagTypes:{BASE_URL:"BaseURL",SEGMENT_TEMPLATE:"SegmentTemplate",REPRESENTATION:"Representation",ESSENTIAL_PROPERTY:"EssentialProperty",ADAPTATION_SET:"AdaptationSet"},AttributeTypes:{BASE_URL:"BaseURL",ID:"id",CONTENT_TYPE:"contentType",MIME_TYPE:"mimeType",MEDIA:"media",DURATION:"duration",START_NUMBER:"startNumber",TIMESCALE:"timescale",PRESENTATION_TIME_OFFSET:"presentationTimeOffset",END_NUMBER:"endNumber",BANDWIDTH:"bandwidth",WIDTH:"width",HEIGHT:"height",SCHEME_ID_URI:"schemeIdUri",VALUE:"value"}},P={parseXml:function(e){return(new DOMParser).parseFromString(e,"text/xml")},parseAttr:function(e,t,i,r){var n=null,a=e.getAttribute(t);return null!==a&&(n=i?i(a):a),null==n?r:n},findElements:function(e,t){return e.getElementsByTagName(t)},findChild:function(e,t){var i=this.findChildren(e,t);return 1!==i.length?null:i[0]},findChildren:function(e,t){return Array.from(e.childNodes).filter((function(e){return e instanceof Element&&e.tagName===t}))},parseInt:function(e){var t=Number(e);return t%1==0?t:null},parsePositiveInt:function(e){var t=Number(e);return t%1==0&&t>0?t:null},parseFloat:function(e){var t=Number(e);return isNaN(t)?null:t}};function w(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function e(e){this._schemeIdUri=P.parseAttr(e,A.AttributeTypes.SCHEME_ID_URI),this._value=P.parseAttr(e,A.AttributeTypes.VALUE)}var t,i,r;return t=e,(i=[{key:"schemeIdUri",get:function(){return this._schemeIdUri}},{key:"value",get:function(){return this._value}}])&&w(t.prototype,i),r&&w(t,r),e}();function I(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(e){this._id=P.parseAttr(e,A.AttributeTypes.ID),this._bandwidth=P.parseAttr(e,A.AttributeTypes.BANDWIDTH,parseInt),this._width=P.parseAttr(e,A.AttributeTypes.WIDTH,parseInt),this._height=P.parseAttr(e,A.AttributeTypes.HEIGHT,parseInt);var t=P.findChild(e,A.TagTypes.ESSENTIAL_PROPERTY);t&&(this._essentialProperty=new D(t))}var t,i,r;return t=e,(i=[{key:"bandwidth",get:function(){return this._bandwidth}},{key:"id",get:function(){return this._id}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"essentialProperty",get:function(){return this._essentialProperty}}])&&I(t.prototype,i),r&&I(t,r),e}();function R(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(e){this._id=P.parseAttr(e,A.AttributeTypes.ID),this._mimeType=P.parseAttr(e,A.AttributeTypes.MIME_TYPE),this._contentType=P.parseAttr(e,A.AttributeTypes.CONTENT_TYPE),this._representations=Array.from(P.findChildren(e,A.TagTypes.REPRESENTATION)).map((function(e){return new x(e)}));var t=P.findChild(e,A.TagTypes.SEGMENT_TEMPLATE);t&&(this._segmentTemplate=new k(t));var i=P.findChild(e,A.TagTypes.ESSENTIAL_PROPERTY);i&&(this._essentialProperty=new D(i))}var t,i,r;return t=e,(i=[{key:"id",get:function(){return this._id}},{key:"mimeType",get:function(){return this._mimeType}},{key:"contentType",get:function(){return this._contentType}},{key:"segmentTemplate",get:function(){return this._segmentTemplate}},{key:"essentialProperty",get:function(){return this._essentialProperty}},{key:"representations",get:function(){return this._representations}}])&&R(t.prototype,i),r&&R(t,r),e}();function M(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(O,"ContentType",{VIDEO:"video",AUDIO:"audio",TEXT:"text",IMAGE:"image"});var C=function(){function e(e){var t,i=this;N(this,"_logger",Object(a.getLogger)("DashManifestParser")),N(this,"_parseAdaptionSets",(function(){var e=P.findElements(i._xmlDoc,A.TagTypes.BASE_URL);e&&e.length>0&&e[0].innerHTML&&(i._baseURL=e[0].textContent);var t=P.findElements(i._xmlDoc,A.TagTypes.ADAPTATION_SET),r=Array.from(t).filter((function(e){return P.parseAttr(e,A.AttributeTypes.CONTENT_TYPE)===O.ContentType.IMAGE}));r.length>0?(i._adaptationSets=r.map((function(e){return new O(e)})),i._logger.debug("Found image adaptation set",i._adaptationSets)):i._logger.debug("No image adaptations were found in manifest")})),this._logger.debug("Initialize manifest parser"),this._adaptationSets=[],(t=e instanceof ArrayBuffer?S(e):e)&&(this._xmlDoc=P.parseXml(t))}e.isValid=function(){return window.TextEncoder&&window.TextDecoder};var t,i,r,n=e.prototype;return n.parseManifest=function(){try{this._logger.debug("Start parsing dash manifest"),this._parseAdaptionSets(),this._logger.debug("Manifest parsing finished successfully")}catch(e){this._logger.warn("Manifest parsing failed",e)}},n.getBaseUrl=function(){return this._baseURL||""},n.getImageSet=function(){return this._adaptationSets.find((function(e){return e.contentType===O.ContentType.IMAGE}))},n.hasImageSet=function(){return!!this.getImageSet()},t=e,(i=[{key:"adaptationSets",get:function(){return this._adaptationSets}}])&&M(t.prototype,i),r&&M(t,r),e}();function L(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var U=function(){function e(e,t,i){var r=this;L(this,"_tracks",[]),L(this,"_parseTracks",(function(e,t,i){var n=e.representations,s=e.segmentTemplate,o=e.essentialProperty;n.forEach((function(e,n){var c=e.id,u=e.bandwidth,l=e.width,h=e.height,d=s.startNumber,f=s.duration,g=s.media,m=s.timescale,_=s.presentationTimeOffset,p=r._getEssentialValue(o,e),v=r._getDimensions(p),y=v[0],T=v[1];r._tracks.push(new a.ImageTrack({id:c,index:n,active:!1,width:l,height:h,duration:f,rows:y,cols:T,url:r._buildTemplateUrl(g,c,t,i),customData:{bitrate:u,startNumber:d,timescale:m,presentationTimeOffset:_}}))}))})),L(this,"_getDimensions",(function(e){var t=1,i=1;if(e.includes("x")){var r=e.split("x");t=parseInt(r[0]),i=parseInt(r[1])}return[t,i]})),L(this,"_getEssentialValue",(function(e,t){return e?e.value:t.essentialProperty?t.essentialProperty.value:""})),L(this,"_buildTemplateUrl",(function(e,t,i,r){var n=i.split("/").pop(),a=i.replace(n,"");return(r=r.replace(/^\.\/|^\./,"")).length>0&&!r.endsWith("/")&&(r+="/"),E(""+a+r+e,{id:t})})),L(this,"_buildUrlFromTemplate",(function(e,t){return E(e.url,{index:t,time:(t-1)*e.duration*e.customData.timescale,bitrate:e.customData.bitrate})})),this._parseTracks(e,t,i),this._tracks.length>0&&(this._tracks.sort((function(e,t){return e.customData.bitrate-t.customData.bitrate})),this.selectTrack(this._tracks[this._tracks.length-1]))}var t=e.prototype;return t.selectTrack=function(e){this._tracks.forEach((function(t){return t.index===e.index?t.active=!0:t.active=!1}))},t.getTracks=function(){return this._tracks},t.getActiveTrack=function(){return this._tracks.find((function(e){return e.active}))},t.getThumbnail=function(e){var t=this.getActiveTrack(),i=t.duration,r=t.rows,n=t.cols,s=t.sliceWidth,o=t.sliceHeight,c=t.customData,u=Math.floor(e/i)+c.startNumber,l=e%i,h=Math.floor(l*r*n/i);return new a.ThumbnailInfo({width:Math.floor(s),height:Math.floor(o),x:Math.floor(h%r)*s,y:Math.floor(h/r)*o,url:this._buildUrlFromTemplate(t,u)})},e}();function j(e,t,i,r,n,a,s){try{var o=e[a](s),c=o.value}catch(e){return void i(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function B(e){return function(){var t=this,i=arguments;return new Promise((function(r,n){var a=e.apply(t,i);function s(e){j(a,r,n,s,o,"next",e)}function o(e){j(a,r,n,s,o,"throw",e)}s(void 0)}))}}function V(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return F(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function H(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Y="error",q="adaptation",z="buffering",$="drmsessionupdate",K="emsg",J=function(e){var t,i;i=e,(t=u).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,u.createAdapter=function(e,t,i){var r=a.Utils.Object.copyDeep(m);if(a.Utils.Object.hasPropertyPath(i,"text.useNativeTextTrack")&&(r.textTrackVisibile=a.Utils.Object.getPropertyPath(i,"text.useNativeTextTrack")),a.Utils.Object.hasPropertyPath(i,"text.useShakaTextTrackDisplay")&&(r.useShakaTextTrackDisplay=a.Utils.Object.getPropertyPath(i,"text.useShakaTextTrackDisplay"),r.textTrackVisibile=r.textTrackVisibile||r.useShakaTextTrackDisplay),a.Utils.Object.hasPropertyPath(i,"streaming")){var n=i.streaming;"boolean"==typeof n.forceBreakStall&&(r.forceBreakStall=n.forceBreakStall),"boolean"==typeof n.lowLatencyMode&&(r.lowLatencyMode=n.lowLatencyMode),"boolean"==typeof n.trackEmsgEvents&&(r.trackEmsgEvents=n.trackEmsgEvents),"boolean"==typeof n.switchDynamicToStatic&&(r.switchDynamicToStatic=n.switchDynamicToStatic)}if(a.Utils.Object.hasPropertyPath(i,"sources.options")){var s=i.sources.options;r.forceRedirectExternalStreams=s.forceRedirectExternalStreams,r.redirectExternalStreamsHandler=s.redirectExternalStreamsHandler,r.redirectExternalStreamsTimeout=s.redirectExternalStreamsTimeout}if(a.Utils.Object.hasPropertyPath(i,"abr")){var o=i.abr;"boolean"==typeof o.enabled&&(r.shakaConfig.abr.enabled=o.enabled),"boolean"==typeof o.capLevelToPlayerSize&&(r.capLevelToPlayerSize=o.capLevelToPlayerSize),o.defaultBandwidthEstimate&&(r.shakaConfig.abr.defaultBandwidthEstimate=o.defaultBandwidthEstimate),o.restrictions&&a.Utils.Object.createPropertyPath(r,"abr.restrictions",o.restrictions)}return a.Utils.Object.hasPropertyPath(i,"playback.options.html5.dash")&&(a.Utils.Object.mergeDeep(r.shakaConfig,i.playback.options.html5.dash),a.Utils.Object.hasPropertyPath(r.shakaConfig,"manifest.dash.defaultPresentationDelay")&&(r.shakaConfig.manifest.defaultPresentationDelay=r.shakaConfig.manifest.dash.defaultPresentationDelay,delete r.shakaConfig.manifest.dash.defaultPresentationDelay)),r.network=i.network,new this(e,t,r)},u.canPlayType=function(e){var t="string"==typeof e&&(e.toLowerCase()===u._dashMimeType&&u.isMSESupported());return u._logger.debug("canPlayType result for mimeType: "+e+" is "+t.toString()),t};var r,n,s,c=u.prototype;function u(t,i,r){var n,s;return void 0===r&&(r={}),u._logger.debug("Creating adapter. Shaka version: "+o.a.Player.version),G(W(s=e.call(this,t,i,r)||this),"_shakaLib",o.a),G(W(s),"_adapterEventsBindings",((n={})[Y]=function(e){return s._onError(e)},n[q]=function(){return s._onAdaptation()},n[z]=function(e){return s._onBuffering(e)},n[$]=function(){return s._onDrmSessionUpdate()},n[K]=function(e){return s._onEmsg(e)},n[a.EventType.WAITING]=function(){return s._onWaiting()},n[a.EventType.PLAYING]=function(){return s._onPlaying()},n)),G(W(s),"_buffering",!1),G(W(s),"_waitingSent",!1),G(W(s),"_playingSent",!1),G(W(s),"_videoSizeUpdateTimer",null),G(W(s),"_stallInterval",null),G(W(s),"VIDEO_ERROR_CODE",3016),G(W(s),"_lastTimeDetach",NaN),G(W(s),"_requestFilterError",!1),G(W(s),"_responseFilterError",!1),G(W(s),"_isDestroyInProgress",!1),G(W(s),"_isStartOver",!0),G(W(s),"_seekRangeStart",0),G(W(s),"_isLive",!1),G(W(s),"_isStaticLive",!1),G(W(s),"_selectedVideoTrack",null),s._config=a.Utils.Object.mergeDeep({},m,s._config),s._init(),s}return c.setMaxBitrate=function(e){this._hasLowerOrEqualBitrate(e)&&this._shaka.configure({abr:{restrictions:{maxBandwidth:e}}})},c._getSortedTracks=function(){return this._shaka.getVariantTracks().map((function(e){return{id:e.id,bandwidth:e.bandwidth,active:e.active}})).sort((function(e,t){return e.bandwidth-t.bandwidth}))},c._hasLowerOrEqualBitrate=function(e){return this._getSortedTracks()[0].bandwidth<=e},u.canPlayDrm=function(e,t){u._availableDrmProtocol=[];for(var i,r=V(u._drmProtocols);!(i=r()).done;){var n=i.value;if(n.isConfigured(e,t)){u._availableDrmProtocol.push(n);break}}if(!u._availableDrmProtocol.length)for(var a,s=V(u._drmProtocols);!(a=s()).done;){var o=a.value;o.canPlayDrm(e)&&u._availableDrmProtocol.push(o)}return!!u._availableDrmProtocol.length},u.isSupported=function(){var e=!1;window.VTTCue||(e=!0),o.a.polyfill.installAll();var t=o.a.Player.isBrowserSupported();return e&&(window.VTTCue=void 0),u._logger.debug("isSupported:"+t),t},c._init=function(){o.a.polyfill.installAll(),this._shaka=new o.a.Player,this._config.useShakaTextTrackDisplay&&this._shaka.setVideoContainer(a.Utils.Dom.getElementBySelector(".playkit-subtitles")),this._maybeSetFilters(),this._maybeSetDrmConfig(),this._maybeBreakStalls(),this._shaka.configure(this._config.shakaConfig),this._addBindings()},c._clearStallInterval=function(){this._stallInterval&&(clearInterval(this._stallInterval),this._stallInterval=null)},c._stallHandler=function(){var e=this;this._clearStallInterval();var t=function(){return Date.now()/1e3},i=t(),r=this._videoElement.currentTime;this._stallInterval=setInterval((function(){t()-i>3&&!e._videoElement.paused&&(r===e._videoElement.currentTime&&(u._logger.debug("stall found, break the stall"),e._videoElement.currentTime=parseFloat(e._videoElement.currentTime.toFixed(1))+.1),e._clearStallInterval()),r=e._videoElement.currentTime}),500)},c._maybeBreakStalls=function(){var e=this;this._config.forceBreakStall&&this._eventManager.listen(this._videoElement,a.EventType.SEEKING,(function(){return e._stallHandler()}))},c._maybeGetRedirectedUrl=function(e){var t=this._config.forceRedirectExternalStreams,i=this._config.redirectExternalStreamsTimeout,r=this._config.redirectExternalStreamsHandler;return new Promise((function(n){if(!t)return n(e);a.Utils.Http.jsonp(e,r,{timeout:i}).then((function(e){n(e)})).catch((function(){return n(e)}))}))},c._maybeSetFilters=function(){var e=this;"function"==typeof a.Utils.Object.getPropertyPath(this._config,"network.requestFilter")&&(u._logger.debug("Register request filter"),this._shaka.getNetworkingEngine().registerRequestFilter((function(t,i){if(Object.values(a.RequestType).includes(t)){var r,n={url:i.uris[0],body:i.body,headers:i.headers};try{r=e._config.network.requestFilter(t,n)}catch(e){r=Promise.reject(e)}return(r=r||Promise.resolve(n)).then((function(e){i.uris=[e.url],i.headers=e.headers,"boolean"==typeof e.withCredentials&&(i.allowCrossSiteCredentials=e.withCredentials),"POST"===i.method?i.body=e.body:e.body&&u._logger.warn("Request with "+i.method+" method cannot have body")})).catch((function(t){throw e._requestFilterError=!0,t}))}}))),"function"==typeof a.Utils.Object.getPropertyPath(this._config,"network.responseFilter")&&(u._logger.debug("Register response filter"),this._shaka.getNetworkingEngine().registerResponseFilter((function(t,i){if(Object.values(a.RequestType).includes(t)){var r,n=i.uri,s=i.data,o=i.headers,c={url:n,originalUrl:e._sourceObj.url,data:s,headers:o};try{r=e._config.network.responseFilter(t,c)}catch(e){r=Promise.reject(e)}return(r=r||Promise.resolve(c)).then((function(e){i.data=e.data})).catch((function(t){throw e._responseFilterError=!0,t}))}})))},c._maybeSetDrmConfig=function(){if(this._sourceObj&&this._sourceObj.drmData)for(var e,t={},i=V(u._availableDrmProtocol);!(e=i()).done;){e.value.setDrmPlayback(t,this._sourceObj.drmData),this._config.shakaConfig.drm&&a.Utils.Object.mergeDeep(t.drm,this._config.shakaConfig.drm),a.Utils.Object.mergeDeep(this._config.shakaConfig,t)}},c._maybeCapLevelToPlayerSize=function(){var e=this;if(this._config.capLevelToPlayerSize){var t=function(){return{minHeight:0,maxHeight:e._videoHeight,minWidth:0,maxWidth:e._videoWidth,minBitrate:0,maxBitrate:1/0}};this._clearVideoUpdateTimer(),this._videoSizeUpdateTimer=setInterval((function(){return e._updateRestriction(t())}),1e3),this._updateRestriction(t())}},c._maybeApplyAbrRestrictions=function(){this._config.capLevelToPlayerSize||(this._clearVideoUpdateTimer(),a.Utils.Object.hasPropertyPath(this._config,"abr.restrictions")&&this._updateRestriction(this._config.abr.restrictions))},c._updateRestriction=function(e){var t=this._getRestrictionShakaConfig(e);this._shaka.configure({abr:{restrictions:t}})},c._getRestrictionShakaConfig=function(e){var t=this,i=function(e){var i=t._getVideoTracks();return Math.min.apply(null,i.map((function(t){return t[e]})))},r={};if(e){var n=e.maxHeight,a=e.maxWidth,s=e.maxBitrate,o=e.minHeight,c=e.minWidth,l=e.minBitrate,h=Math.max(o,0),d=Math.max(n,i("height"));d>=h?(r.minHeight=h,r.maxHeight=d):u._logger.warn("Invalid maxHeight restriction, maxHeight must be greater than minHeight",o,n);var f=Math.max(c,0),g=Math.max(a,i("width"));g>=f?(r.minWidth=f,r.maxWidth=g):u._logger.warn("Invalid maxWidth restriction, maxWidth must be greater than minWidth",c,a);var m=Math.max(l,0),_=Math.max(s,i("bandwidth"));_>=m?(r.minBandwidth=m,r.maxBandwidth=_):u._logger.warn("Invalid maxBitrate restriction, maxBitrate must be greater than minBitrate",l,s)}return r},c.attachMediaSource=function(){this._shaka||(this._videoElement&&this._videoElement.src&&(a.Utils.Dom.setAttribute(this._videoElement,"src",""),a.Utils.Dom.removeAttribute(this._videoElement,"src")),this._init())},c.detachMediaSource=function(){var e=this;return this._shaka?(0===Math.floor(this.duration-this.currentTime)?this._lastTimeDetach=0:this.currentTime>0&&(this._lastTimeDetach=this.currentTime),this._reset().then((function(){e._shaka=null,e._loadPromise=null}))):Promise.resolve()},c._clearVideoUpdateTimer=function(){this._videoSizeUpdateTimer&&(clearInterval(this._videoSizeUpdateTimer),this._videoSizeUpdateTimer=null)},c._addBindings=function(){var e=this;this._eventManager.listen(this._shaka,q,this._adapterEventsBindings.adaptation),this._eventManager.listen(this._shaka,Y,this._adapterEventsBindings.error),this._eventManager.listen(this._shaka,$,this._adapterEventsBindings.drmsessionupdate),this._eventManager.listen(this._videoElement,a.EventType.WAITING,this._adapterEventsBindings.waiting),this._eventManager.listen(this._videoElement,a.EventType.PLAYING,this._adapterEventsBindings.playing),this._eventManager.listen(this._videoElement,a.EventType.LOADED_DATA,(function(){return e._onLoadedData()})),this._eventManager.listenOnce(this._videoElement,a.EventType.PLAYING,(function(){e._eventManager.listen(e._shaka,z,e._adapterEventsBindings.buffering)})),this._config.trackEmsgEvents&&this._eventManager.listen(this._shaka,K,this._adapterEventsBindings.emsg),this._shaka.getNetworkingEngine().registerResponseFilter((function(t,i){switch(t){case o.a.net.NetworkingEngine.RequestType.SEGMENT:e._trigger(a.EventType.FRAG_LOADED,{miliSeconds:i.timeMs,bytes:i.data.byteLength,url:i.uri}),e.isLive()&&e._dispatchNativeEvent(a.EventType.DURATION_CHANGE);break;case o.a.net.NetworkingEngine.RequestType.MANIFEST:e._parseManifest(i.data),e._playbackActualUri=i.uri,e._trigger(a.EventType.MANIFEST_LOADED,{miliSeconds:i.timeMs}),setTimeout((function(){var t,r;e._isLive=e._isLive||(null==(t=e._shaka)?void 0:t.isLive()),e._isLive&&!(null==(r=e._shaka)?void 0:r.isLive())&&!e._isStaticLive&&e._config.switchDynamicToStatic&&(e._sourceObj.url=i.uri,e._switchFromDynamicToStatic())}))}}))},c._onLoadedData=function(){var e=this;this._setLowLatencyMode();var t=this.getSegmentDuration();this._seekRangeStart=this._shaka.seekRange().start,this._startOverTimeout=setTimeout((function(){e._shaka.seekRange().start-e._seekRangeStart>=t&&(e._isStartOver=!1)}),1e3*(t+1))},c._switchFromDynamicToStatic=function(){var e=this;u._logger.debug("Switch from dynamic manifest to static");var t=this._getLiveEdge()-this._seekRangeStart-(this._getLiveEdge()-this._videoElement.currentTime);this._dispatchNativeEvent(a.EventType.WAITING);var i=this.isAdaptiveBitrateEnabled(),r=this._videoElement.paused;this.detachMediaSource().then((function(){e._isStaticLive=!0,e._isLive=!0,e.attachMediaSource(),e.load().then((function(){e._videoElement.currentTime=t,!r&&e._videoElement.play(),i?e._onAdaptation():e._selectedVideoTrack&&(u._logger.debug("Select the selected video track"),e.selectVideoTrack(e._selectedVideoTrack))}))}))},c._setLowLatencyMode=function(){this._shaka.configure({streaming:{lowLatencyMode:"boolean"==typeof this._config.lowLatencyMode?this._config.lowLatencyMode:this.isLive()}})},c._parseManifest=function(e){!this._manifestParser&&C.isValid()&&(u._logger.debug("Creating parser for the first time"),this._manifestParser=new C(e),this._manifestParser.parseManifest())},c.load=function(){var e=B(regeneratorRuntime.mark((function e(t){var i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._loadPromise){e.next=5;break}return e.next=3,this._removeMediaKeys();case 3:this._shaka.attach(this._videoElement),this._loadPromise=new Promise((function(e,r){if(i._sourceObj&&i._sourceObj.url){i._trigger(a.EventType.ABR_MODE_CHANGED,{mode:i.isAdaptiveBitrateEnabled()?"auto":"manual"});var n=t&&t>-1?t:void 0;n=isNaN(i._lastTimeDetach)?n:i._lastTimeDetach,i._lastTimeDetach=NaN,i._maybeGetRedirectedUrl(i._sourceObj.url).then((function(e){return i._shaka.load(e,n)})).then((function(){var t={tracks:i._getParsedTracks()};i._maybeCapLevelToPlayerSize(),u._logger.debug("The source has been loaded successfully"),e(t)})).catch((function(e){r(new a.Error(i._isDestroyInProgress?a.Error.Severity.RECOVERABLE:e.severity,e.category,e.code,e.data))}))}}));case 5:return e.abrupt("return",this._loadPromise);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.destroy=function(){var t=this;return this._isDestroyInProgress=!0,new Promise((function(i,r){e.prototype.destroy.call(t).then((function(){u._logger.debug("destroy"),t._loadPromise=null,t._adapterEventsBindings={},t._reset().then((function(e){t._isDestroyInProgress=!1,i(e)})).catch((function(e){t._isDestroyInProgress=!1,r(e)}))}))}))},c.getThumbnail=function(e){if(this._thumbnailController)return this._thumbnailController.getThumbnail(e)},c._reset=function(){return this._buffering=!1,this._waitingSent=!1,this._playingSent=!1,this._isLive=!1,this._isStaticLive=!1,this._requestFilterError=!1,this._responseFilterError=!1,this._manifestParser=null,this._thumbnailController=null,this._clearStallInterval(),this._clearVideoUpdateTimer(),clearTimeout(this._startOverTimeout),this._eventManager&&this._eventManager.removeAll(),this._shaka?this._shaka.destroy():Promise.resolve()},c._removeMediaKeys=function(){var e=B(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._videoElement||!this._videoElement.mediaKeys){e.next=16;break}return e.prev=1,u._logger.debug("Removing mediaKeys from the video element"),e.next=5,this._videoElement.setMediaKeys(null);case 5:u._logger.debug("mediaKeys removed"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this._logger.warn("mediaKeys not cleared");case 11:return e.prev=11,e.abrupt("return",Promise.resolve());case 14:e.next=17;break;case 16:return e.abrupt("return",Promise.resolve());case 17:case"end":return e.stop()}}),e,this,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}(),c._getVideoTracks=function(){var e=this._shaka.getVariantTracks(),t=this._getActiveTrack();return e.filter((function(e){return e.audioId===t.audioId}))},c._getActiveTrack=function(){return this._shaka.getVariantTracks().find((function(e){return e.active}))},c._getAudioTracks=function(){var e=this._shaka.getVariantTracks(),t=this._shaka.getAudioLanguagesAndRoles();return t.forEach((function(t){var i=e.filter((function(e){return e.language===t.language})),r=i.map((function(e){return e.id})).join("_"),n=i.some((function(e){return e.active}));t.id=r,t.label=i[0].label,t.active=n})),t},c._getParsedTracks=function(){if(this._shaka){var e=this._getParsedVideoTracks(),t=this._getParsedAudioTracks(),i=this._getParsedTextTracks(),r=this._getParsedImageTracks();return e.concat(t).concat(i).concat(r)}return[]},c._getParsedVideoTracks=function(){var e=this._getVideoTracks(),t=[];if(e)for(var i=0;i<e.length;i++){var r={id:e[i].id,bandwidth:e[i].videoBandwidth||e[i].bandwidth,width:e[i].width,height:e[i].height,active:e[i].active,index:i};t.push(new a.VideoTrack(r))}return t},c._getParsedAudioTracks=function(){var e=this._getAudioTracks(),t=[];if(e)for(var i=0;i<e.length;i++){var r={id:e[i].id,active:e[i].active,label:e[i].label,language:e[i].language,index:i};t.push(new a.AudioTrack(r))}return t},c._getParsedTextTracks=function(){for(var e,t=[],i=V(this._shaka.getTextTracks());!(e=i()).done;){var r=e.value,n=r.kind?r.kind+"s":"";n=""===n&&this._config.useShakaTextTrackDisplay?"captions":n;var s={id:r.id,kind:n,active:!1,label:r.label,language:r.language};t.push(new a.TextTrack(s))}return t},c._getParsedImageTracks=function(){var e,t,i=null==(e=this._manifestParser)?void 0:e.getImageSet(),r=(null==(t=this._manifestParser)?void 0:t.getBaseUrl())||"";return i?(this._thumbnailController=new U(i,this._playbackActualUri,r),this._thumbnailController.getTracks()):[]},c.selectVideoTrack=function(e){if(this._shaka){var t=this._getVideoTracks();if(e instanceof a.VideoTrack&&t){var i=t[e.index];i&&(this.isAdaptiveBitrateEnabled()&&(this._shaka.configure({abr:{enabled:!1}}),this._trigger(a.EventType.ABR_MODE_CHANGED,{mode:"manual"})),i.active||(this._selectedVideoTrack=e,this._shaka.selectVariantTrack(t[e.index],!0),this._onTrackChanged(e)))}}},c.selectAudioTrack=function(e){this._shaka&&e instanceof a.AudioTrack&&!e.active&&(this._shaka.selectAudioLanguage(e.language),this._onTrackChanged(e))},c.selectTextTrack=function(e){this._shaka&&e instanceof a.TextTrack&&!e.active&&("subtitles"===e.kind||"captions"===e.kind)&&(this._shaka.setTextTrackVisibility(this._config.textTrackVisibile),this._shaka.selectTextLanguage(e.language),this._onTrackChanged(e))},c.selectImageTrack=function(e){this._shaka&&this._thumbnailController&&e instanceof a.ImageTrack&&!e.active&&(this._thumbnailController.selectTrack(e),this._onTrackChanged(a.ImageTrack))},c.hideTextTrack=function(){this._shaka&&this._shaka.setTextTrackVisibility(!1)},c.enableAdaptiveBitrate=function(){this._shaka&&!this.isAdaptiveBitrateEnabled()&&(this._trigger(a.EventType.ABR_MODE_CHANGED,{mode:"auto"}),this._shaka.configure({abr:{enabled:!0}}))},c.isAdaptiveBitrateEnabled=function(){return!!this._shaka&&this._shaka.getConfiguration().abr.enabled},c.applyABRRestriction=function(e){if(a.Utils.Object.createPropertyPath(this._config,"abr.restrictions",e),this._maybeApplyAbrRestrictions(),!this.isAdaptiveBitrateEnabled()){var t=this._getParsedVideoTracks(),i=Object(a.filterTracksByRestriction)(t,this._config.abr.restrictions);if(i.length)i.find((function(e){return e.active}))||this.selectVideoTrack(i[0])}},c._getLiveEdge=function(){return this._shaka?this._shaka.seekRange().end:NaN},c.seekToLiveEdge=function(){this._shaka&&this._videoElement.readyState>0&&(this._videoElement.currentTime=this._getLiveEdge())},c.isLive=function(){var e;return(null==(e=this._shaka)?void 0:e.isLive())||this._isLive},c.getSegmentDuration=function(){return this._shaka?this._shaka.getStats().maxSegmentDuration:0},c._onAdaptation=function(){var e=this._getParsedVideoTracks().find((function(e){return e.active}));this._onTrackChanged(e)},c._onError=function(e){if(e&&e.detail){var t=e.detail;if(t.code===this.VIDEO_ERROR_CODE)return;(this._requestFilterError||this._responseFilterError)&&t.data[0]instanceof o.a.util.Error&&(t=t.data[0],this._requestFilterError?this._requestFilterError=!1:this._responseFilterError=!1),this._trigger(a.EventType.ERROR,new a.Error(t.severity,t.category,t.code,t.data)),u._logger.error(t),t.severity===a.Error.Severity.CRITICAL&&this.destroy()}},c._onBuffering=function(e){e.buffering?this._waitingSent||(this._dispatchNativeEvent(a.EventType.WAITING),this._buffering=!0):(this._buffering=!1,this._videoElement.paused||this._playingSent||this._dispatchNativeEvent(a.EventType.PLAYING))},c._dispatchNativeEvent=function(e){var t;"function"==typeof window.Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0),this._videoElement.dispatchEvent(t)},c._onDrmSessionUpdate=function(){this._trigger(a.EventType.DRM_LICENSE_LOADED,{licenseTime:this._shaka.getStats().licenseTime,scheme:this._shaka.drmInfo().keySystem})},c._onEmsg=function(e){var t=e.detail,i=e.type,r=Array.from(this._videoElement.textTracks).find((function(e){return e.label===i}));r||(r=this._videoElement.addTextTrack(a.TextTrack.KIND.METADATA,i));var n=t.startTime,s=t.endTime,o=t.id,c=function(e,t){if(null==e)return{};var i,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)i=a[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(t,["startTime","endTime","id"]),u=new a.TimedMetadata(n,s,o,a.TimedMetadata.TYPE.EMSG,c),l=Object(a.createTextTrackCue)(u);r.addCue(l),this._trigger(a.EventType.TIMED_METADATA_ADDED,{cues:[u]})},c._onWaiting=function(){this._waitingSent=!0,this._playingSent=!1},c._onPlaying=function(){this._playingSent=!0,this._waitingSent=!1,this._buffering&&this._dispatchNativeEvent(a.EventType.WAITING)},c.getStartTimeOfDvrWindow=function(){return this.isLive()&&this._shaka?(this._isStartOver?this._seekRangeStart:this._shaka.seekRange().start)+this._shaka.getConfiguration().streaming.safeSeekOffset:0},c.getDrmInfo=function(){var e=this._shaka.drmInfo();if(e){var t=e.licenseServerUri,i=e.keySystem,r=e.serverCertificateUri,n={licenseUrl:t,scheme:i};return r&&(n.certificate=r),n}return null},r=u,(n=[{key:"_videoWidth",get:function(){var e,t=this._videoElement;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=this._contentScaleFactor),e}},{key:"_videoHeight",get:function(){var e,t=this._videoElement;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=this._contentScaleFactor),e}},{key:"_contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){u._logger.debug("failed reading devicePixelRatio, assume 1")}return e}},{key:"liveDuration",get:function(){return this._getLiveEdge()}},{key:"targetBuffer",get:function(){var e=NaN;return this._shaka?(e=this.isLive()?this._getLiveEdge()-this._videoElement.currentTime:this._videoElement.duration-this._videoElement.currentTime,e=Math.min(e,this._shaka.getConfiguration().streaming.bufferingGoal+this._shaka.getStats().maxSegmentDuration)):NaN}}])&&H(r.prototype,n),s&&H(r,s),u}(a.BaseMediaSourceAdapter);G(J,"id","DashAdapter"),G(J,"_logger",a.BaseMediaSourceAdapter.getLogger(J.id)),G(J,"_dashMimeType","application/dash+xml"),G(J,"_drmProtocols",[f,g]),G(J,"_availableDrmProtocol",[]);var X="1.31.3",Z="@playkit-js/playkit-js-dash";t.default=J;J.isSupported()&&Object(a.registerMediaSourceAdapter)(J)}])}));
//# sourceMappingURL=playkit-dash.js.map