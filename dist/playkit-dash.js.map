{"version":3,"file":"playkit-dash.js","mappings":"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","sources":["webpack://playkit.dash/webpack/universalModuleDefinition","webpack://playkit.dash/./src/assets/style.css","webpack://playkit.dash/./node_modules/css-loader/dist/runtime/api.js","webpack://playkit.dash/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://playkit.dash/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://playkit.dash/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://playkit.dash/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://playkit.dash/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://playkit.dash/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://playkit.dash/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://playkit.dash/external umd {\"commonjs\":\"@playkit-js/playkit-js\",\"commonjs2\":\"@playkit-js/playkit-js\",\"amd\":\"playkit-js\",\"root\":[\"playkit\",\"core\"]}","webpack://playkit.dash/external umd {\"commonjs\":\"shaka-player\",\"commonjs2\":\"shaka-player\",\"amd\":\"shaka-player\",\"root\":[\"shaka\"]}","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/typeof.js","webpack://playkit.dash/./node_modules/@babel/runtime/regenerator/index.js","webpack://playkit.dash/webpack/bootstrap","webpack://playkit.dash/webpack/runtime/compat get default export","webpack://playkit.dash/webpack/runtime/define property getters","webpack://playkit.dash/webpack/runtime/hasOwnProperty shorthand","webpack://playkit.dash/webpack/runtime/make namespace object","webpack://playkit.dash/webpack/runtime/nonce","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/get.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://playkit.dash/./src/drm/widevine.ts","webpack://playkit.dash/./src/drm/playready.ts","webpack://playkit.dash/./src/assets/style.css?601d","webpack://playkit.dash/./src/parser/segment-template.ts","webpack://playkit.dash/./src/parser/parser-utils.ts","webpack://playkit.dash/./src/parser/essential-property.ts","webpack://playkit.dash/./src/parser/representation.ts","webpack://playkit.dash/./src/parser/adaptation-set.ts","webpack://playkit.dash/./src/parser/dash-manifest-parser.ts","webpack://playkit.dash/./src/dash-thumbnail-controller.ts","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://playkit.dash/./src/dash-adapter.ts","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack://playkit.dash/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://playkit.dash/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@playkit-js/playkit-js\"), require(\"shaka-player\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"playkit\", [\"playkit-js\", \"shaka-player\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"playkit\"] = factory(require(\"@playkit-js/playkit-js\"), require(\"shaka-player\"));\n\telse\n\t\troot[\"playkit\"] = root[\"playkit\"] || {}, root[\"playkit\"][\"dash\"] = factory(root[\"playkit\"][\"core\"], root[\"shaka\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__952__, __WEBPACK_EXTERNAL_MODULE__475__) {\nreturn ","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".shaka-text-container {\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0;\\n  pointer-events: none;\\n  width: 100%;\\n  min-width: 48px;\\n  transition: bottom cubic-bezier(0.4, 0, 0.6, 1) 0.1s;\\n  transition-delay: 0s;\\n  font-size: 20px;\\n  line-height: 1.4;\\n  color: #fff;\\n  font-family: Roboto-Regular, Roboto, sans-serif, TengwarTelcontar;\\n}\\n.shaka-text-container span.shaka-text-wrapper {\\n  display: inline;\\n  background: 0 0;\\n  text-align: center;\\n}\\n\\n:fullscreen .shaka-text-container {\\n  font-size: 4.4vmin;\\n}\\n\\n:-webkit-full-screen .shaka-text-container {\\n  font-size: 4.4vmin;\\n}\\n\\n:-moz-full-screen .shaka-text-container {\\n  font-size: 4.4vmin;\\n}\\n\\n:-ms-fullscreen .shaka-text-container {\\n  font-size: 4.4vmin;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,kBAAkB;EAClB,OAAO;EACP,QAAQ;EACR,MAAM;EACN,SAAS;EACT,oBAAoB;EACpB,WAAW;EACX,eAAe;EACf,oDAAoD;EACpD,oBAAoB;EACpB,eAAe;EACf,gBAAgB;EAChB,WAAW;EACX,iEAAiE;AACnE;AACA;EACE,eAAe;EACf,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;AACpB\",\"sourcesContent\":[\".shaka-text-container {\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0;\\n  pointer-events: none;\\n  width: 100%;\\n  min-width: 48px;\\n  transition: bottom cubic-bezier(0.4, 0, 0.6, 1) 0.1s;\\n  transition-delay: 0s;\\n  font-size: 20px;\\n  line-height: 1.4;\\n  color: #fff;\\n  font-family: Roboto-Regular, Roboto, sans-serif, TengwarTelcontar;\\n}\\n.shaka-text-container span.shaka-text-wrapper {\\n  display: inline;\\n  background: 0 0;\\n  text-align: center;\\n}\\n\\n:fullscreen .shaka-text-container {\\n  font-size: 4.4vmin;\\n}\\n\\n:-webkit-full-screen .shaka-text-container {\\n  font-size: 4.4vmin;\\n}\\n\\n:-moz-full-screen .shaka-text-container {\\n  font-size: 4.4vmin;\\n}\\n\\n:-ms-fullscreen .shaka-text-container {\\n  font-size: 4.4vmin;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","module.exports = __WEBPACK_EXTERNAL_MODULE__952__;","module.exports = __WEBPACK_EXTERNAL_MODULE__475__;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw new Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nc = undefined;","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : String(i);\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import superPropBase from \"./superPropBase.js\";\nexport default function _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import { IDrmProtocol, Env, DrmScheme, getLogger, PKDrmConfigObject } from '@playkit-js/playkit-js';\n\nconst Widevine: IDrmProtocol = class Widevine {\n  public static _logger = getLogger('Widevine');\n\n  /**\n   * Widevine is the configure key system.\n   * @param {Array<Object>} drmData - The drm data.\n   * @param {PKDrmConfigObject} drmConfig - The drm config.\n   * @return {boolean} - Whether Widevine is the configure key system.\n   */\n  public static isConfigured(drmData: Array<any>, drmConfig: PKDrmConfigObject): boolean {\n    return DrmScheme.WIDEVINE === drmConfig.keySystem && !!drmData.find(drmEntry => drmEntry.scheme === drmConfig.keySystem);\n  }\n\n  /**\n   * Widevine playback supports in case 2 conditions are met:\n   * 1. The environment supports Widevine playback.\n   * 2. The drm data of the source object contains entry with Widevine scheme.\n   * @param {Array<Object>} drmData - The drm data to check.\n   * @return {boolean} - Whether Widevine can be play on the current environment.\n   */\n  public static canPlayDrm(drmData: Array<any>): boolean {\n    Widevine._logger.debug('Can play DRM scheme of: ' + DrmScheme.WIDEVINE);\n    return !!drmData.find(drmEntry => drmEntry.scheme === DrmScheme.WIDEVINE);\n  }\n\n  /**\n   * Sets the Widevine playback.\n   * @param {Object} config - The shaka player config.\n   * @param {Array<Object>} drmData - The drm data.\n   * @returns {void}\n   */\n  public static setDrmPlayback(config: any, drmData: Array<any>): void {\n    Widevine._logger.debug('Sets drm playback');\n    const browser = Env.browser.name;\n    const wwDrmEntry = drmData.find(drmEntry => drmEntry.scheme === DrmScheme.WIDEVINE);\n    if (wwDrmEntry) {\n      config.drm = {\n        servers: {\n          [DrmScheme.WIDEVINE]: wwDrmEntry.licenseUrl\n        },\n        advanced: {}\n      };\n      if (browser === 'Chrome') {\n        config.drm.advanced = {\n          [DrmScheme.WIDEVINE]: {\n            videoRobustness: 'SW_SECURE_CRYPTO',\n            audioRobustness: 'SW_SECURE_CRYPTO'\n          }\n        };\n      }\n    }\n  }\n};\n\nexport {Widevine};\n","import { IDrmProtocol, DrmScheme, getLogger, PKDrmConfigObject } from '@playkit-js/playkit-js';\n\nconst PlayReady: IDrmProtocol = class PlayReady {\n  public static _logger = getLogger('PlayReady');\n\n  /**\n   * PLAYREADY is the configure key system.\n   * @param {Array<Object>} drmData - The drm data.\n   * @param {PKDrmConfigObject} drmConfig - The drm config.\n   * @return {boolean} - Whether PLAYREADY is the configure key system.\n   */\n  public static isConfigured(drmData: Array<any>, drmConfig: PKDrmConfigObject): boolean {\n    return DrmScheme.PLAYREADY === drmConfig.keySystem && !!drmData.find(drmEntry => drmEntry.scheme === drmConfig.keySystem);\n  }\n\n  /**\n   * PlayReady playback supports in case 2 conditions are met:\n   * 1. The environment supports PlayReady playback.\n   * 2. The drm data of the source object contains entry with PlayReady scheme.\n   * @param {Array<Object>} drmData - The drm data to check.\n   * @return {boolean} - Whether PlayReady can be play on the current environment.\n   */\n  public static canPlayDrm(drmData: Array<any>): boolean {\n    PlayReady._logger.debug('Can play DRM scheme of: ' + DrmScheme.PLAYREADY);\n    return !!drmData.find(drmEntry => drmEntry.scheme === DrmScheme.PLAYREADY);\n  }\n\n  /**\n   * Sets the PlayReady playback.\n   * @param {Object} config - The shaka player config.\n   * @param {Array<Object>} drmData - The drm data.\n   * @returns {void}\n   */\n  public static setDrmPlayback(config: any, drmData: Array<any>): void {\n    PlayReady._logger.debug('Sets drm playback');\n    const prDrmEntry = drmData.find(drmEntry => drmEntry.scheme === DrmScheme.PLAYREADY);\n    if (prDrmEntry) {\n      config.drm = {\n        servers: {\n          [DrmScheme.PLAYREADY]: prDrmEntry.licenseUrl\n        }\n      };\n    }\n  }\n};\n\nexport {PlayReady};\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./style.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./style.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import {MpdUtils, XmlUtils} from './parser-utils';\n\nclass SegmentTemplate {\n  public static MediaTemplateType: {[key: string]: string} = {\n    REPRESENTATION: '$RepresentationID$',\n    NUMBER: '$Number$',\n    BANDWIDTH: '$Bandwidth$',\n    TIME: '$Time$'\n  };\n\n  private _media: string;\n  private _duration: number;\n  private _startNumber: number;\n  // Live related\n  private _timescale: number;\n  private _presentationTimeOffset: number;\n  private _endNumber: number;\n\n  constructor(elem: HTMLElement) {\n    this._media = XmlUtils.parseAttr(elem, MpdUtils.AttributeTypes.MEDIA);\n    this._startNumber = XmlUtils.parseAttr(elem, MpdUtils.AttributeTypes.START_NUMBER, XmlUtils.parseInt, 1);\n    this._duration = XmlUtils.parseAttr(elem, MpdUtils.AttributeTypes.DURATION, XmlUtils.parseFloat);\n    this._timescale = XmlUtils.parseAttr(elem, MpdUtils.AttributeTypes.TIMESCALE, XmlUtils.parsePositiveInt, 1);\n    this._presentationTimeOffset = XmlUtils.parseAttr(elem, MpdUtils.AttributeTypes.PRESENTATION_TIME_OFFSET, XmlUtils.parseInt, 0);\n    this._endNumber = XmlUtils.parseAttr(elem, MpdUtils.AttributeTypes.END_NUMBER, XmlUtils.parsePositiveInt);\n  }\n\n  public get media(): string {\n    return this._media;\n  }\n\n  public get startNumber(): number {\n    return this._startNumber;\n  }\n\n  public get duration(): number {\n    return this._duration;\n  }\n\n  public get timescale(): number {\n    return this._timescale;\n  }\n\n  public get presentationTimeOffset(): number {\n    return this._presentationTimeOffset;\n  }\n\n  public get endNumber(): number {\n    return this._endNumber;\n  }\n}\n\nexport {SegmentTemplate};\n","import {SegmentTemplate} from './segment-template';\n\nconst UrlUtils = {\n  resolve: (url: string, data: {id?: string, index?: number, bitrate?: number, time?: number}): string => {\n    const {id, index, bitrate, time} = data;\n    const regExp = /\\$([a-zA-Z]+)\\$/g;\n    const expressions = url.match(regExp);\n    const replaceTokens = (url: string, exp: string, token: any): string => (token ? url.replace(exp, token) : url);\n    if (expressions) {\n      expressions.forEach((exp: string) => {\n        switch (exp) {\n        case SegmentTemplate.MediaTemplateType.REPRESENTATION:\n          url = replaceTokens(url, exp, id);\n          break;\n        case SegmentTemplate.MediaTemplateType.NUMBER:\n          url = replaceTokens(url, exp, index);\n          break;\n        case SegmentTemplate.MediaTemplateType.BANDWIDTH:\n          url = replaceTokens(url, exp, bitrate);\n          break;\n        case SegmentTemplate.MediaTemplateType.TIME:\n          url = replaceTokens(url, exp, time);\n          break;\n        }\n      });\n    }\n    return url;\n  }\n};\n\nconst ParserUtils = {\n  BufferToStr: (buffer: ArrayBuffer): string | null => {\n    if (TextDecoder) {\n      const textDecoder = new TextDecoder();\n      return textDecoder.decode(new Uint8Array(buffer));\n    }\n    return null;\n  },\n  StrToBuffer: (str: string): Uint8Array | null => {\n    if (TextEncoder) {\n      const textEncoder = new TextEncoder();\n      return textEncoder.encode(str);\n    }\n    return null;\n  }\n};\n\nconst MpdUtils = {\n  TagTypes: {\n    BASE_URL: 'BaseURL',\n    SEGMENT_TEMPLATE: 'SegmentTemplate',\n    REPRESENTATION: 'Representation',\n    ESSENTIAL_PROPERTY: 'EssentialProperty',\n    ADAPTATION_SET: 'AdaptationSet'\n  },\n  AttributeTypes: {\n    BASE_URL: 'BaseURL',\n    ID: 'id',\n    CONTENT_TYPE: 'contentType',\n    MIME_TYPE: 'mimeType',\n    MEDIA: 'media',\n    DURATION: 'duration',\n    START_NUMBER: 'startNumber',\n    TIMESCALE: 'timescale',\n    PRESENTATION_TIME_OFFSET: 'presentationTimeOffset',\n    END_NUMBER: 'endNumber',\n    BANDWIDTH: 'bandwidth',\n    WIDTH: 'width',\n    HEIGHT: 'height',\n    SCHEME_ID_URI: 'schemeIdUri',\n    VALUE: 'value'\n  }\n};\n\nconst XmlUtils = {\n  parseXml: (text: string): Document => {\n    const domParser = new DOMParser();\n    return domParser.parseFromString(text, 'text/xml');\n  },\n  parseAttr: (elem: Element, name: string, parseFunction?: Function, defaultValue?: any): any => {\n    let parsedValue = null;\n    const value = elem.getAttribute(name);\n    if (value !== null) {\n      parsedValue = parseFunction ? parseFunction(value) : value;\n    }\n    return parsedValue === null ? defaultValue : parsedValue;\n  },\n  findElements: (node: Document, name: string): HTMLCollectionOf<Element> => {\n    return node.getElementsByTagName(name);\n  },\n  findChild(elem: Element, name: string): HTMLElement | null {\n    const children = this.findChildren(elem, name);\n    if (children.length !== 1) {\n      return null;\n    }\n    return children[0];\n  },\n  findChildren: (elem: Element, name: string): ChildNode[] => {\n    return Array.from(elem.childNodes).filter(child => {\n      return child instanceof Element && child.tagName === name;\n    });\n  },\n  parseInt: (intString: string): number | null => {\n    const n = Number(intString);\n    return n % 1 === 0 ? n : null;\n  },\n  parsePositiveInt: (intString: string): number | null => {\n    const n = Number(intString);\n    return n % 1 === 0 && n > 0 ? n : null;\n  },\n  parseFloat: (floatString: string): number | null => {\n    const n = Number(floatString);\n    return !isNaN(n) ? n : null;\n  }\n};\n\nexport {ParserUtils, MpdUtils, XmlUtils, UrlUtils};\n","import {MpdUtils, XmlUtils} from './parser-utils';\n\nclass EssentialProperty {\n  private _schemeIdUri: string;\n  private _value: string;\n\n  constructor(elem: HTMLElement) {\n    this._schemeIdUri = XmlUtils.parseAttr(elem, MpdUtils.AttributeTypes.SCHEME_ID_URI);\n    this._value = XmlUtils.parseAttr(elem, MpdUtils.AttributeTypes.VALUE);\n  }\n\n  public get schemeIdUri(): string {\n    return this._schemeIdUri;\n  }\n\n  public get value(): string {\n    return this._value;\n  }\n}\n\nexport {EssentialProperty};\n","import {EssentialProperty} from './essential-property';\nimport {MpdUtils, XmlUtils} from './parser-utils';\n\nclass Representation {\n  private _id: string;\n  private _bandwidth: number;\n  private _width: number;\n  private _height: number;\n  private _essentialProperty: EssentialProperty | undefined;\n\n  constructor(elem: HTMLElement) {\n    this._id = XmlUtils.parseAttr(elem, MpdUtils.AttributeTypes.ID);\n    this._bandwidth = XmlUtils.parseAttr(elem, MpdUtils.AttributeTypes.BANDWIDTH, parseInt);\n    this._width = XmlUtils.parseAttr(elem, MpdUtils.AttributeTypes.WIDTH, parseInt);\n    this._height = XmlUtils.parseAttr(elem, MpdUtils.AttributeTypes.HEIGHT, parseInt);\n    const essPropElem = XmlUtils.findChild(elem, MpdUtils.TagTypes.ESSENTIAL_PROPERTY);\n    if (essPropElem) {\n      this._essentialProperty = new EssentialProperty(essPropElem);\n    }\n  }\n\n  public get bandwidth(): number {\n    return this._bandwidth;\n  }\n\n  public get id(): string {\n    return this._id;\n  }\n\n  public get width(): number {\n    return this._width;\n  }\n\n  public get height(): number {\n    return this._height;\n  }\n\n  public get essentialProperty(): EssentialProperty | undefined {\n    return this._essentialProperty;\n  }\n}\n\nexport {Representation};\n","import {SegmentTemplate} from './segment-template';\nimport {Representation} from './representation';\nimport {MpdUtils, XmlUtils} from './parser-utils';\nimport {EssentialProperty} from './essential-property';\n\nclass AdaptationSet {\n  public static ContentType: {[type: string]: string} = {\n    VIDEO: 'video',\n    AUDIO: 'audio',\n    TEXT: 'text',\n    IMAGE: 'image'\n  };\n\n  private _id: string;\n  private _mimeType: string;\n  private _contentType: string;\n  private _segmentTemplate: SegmentTemplate | undefined;\n  private _essentialProperty: EssentialProperty | undefined;\n  private _representations: Array<Representation>;\n\n  constructor(elem: Element) {\n    this._id = XmlUtils.parseAttr(elem, MpdUtils.AttributeTypes.ID);\n    this._mimeType = XmlUtils.parseAttr(elem, MpdUtils.AttributeTypes.MIME_TYPE);\n    this._contentType = XmlUtils.parseAttr(elem, MpdUtils.AttributeTypes.CONTENT_TYPE);\n    this._representations = Array.from(XmlUtils.findChildren(elem, MpdUtils.TagTypes.REPRESENTATION)).map(repElem => new Representation(repElem as HTMLElement));\n    const segTempElem = XmlUtils.findChild(elem, MpdUtils.TagTypes.SEGMENT_TEMPLATE);\n    if (segTempElem) {\n      this._segmentTemplate = new SegmentTemplate(segTempElem);\n    }\n    const essPropElem = XmlUtils.findChild(elem, MpdUtils.TagTypes.ESSENTIAL_PROPERTY);\n    if (essPropElem) {\n      this._essentialProperty = new EssentialProperty(essPropElem);\n    }\n  }\n\n  public get id(): string {\n    return this._id;\n  }\n\n  public get mimeType(): string {\n    return this._mimeType;\n  }\n\n  public get contentType(): string {\n    return this._contentType;\n  }\n\n  public get segmentTemplate(): SegmentTemplate | undefined {\n    return this._segmentTemplate;\n  }\n\n  public get essentialProperty(): EssentialProperty | undefined {\n    return this._essentialProperty;\n  }\n\n  public get representations(): Array<Representation> {\n    return this._representations;\n  }\n}\n\nexport {AdaptationSet};\n","import {MpdUtils, ParserUtils, XmlUtils} from './parser-utils';\nimport {AdaptationSet} from './adaptation-set';\nimport {getLogger} from '@playkit-js/playkit-js';\n\nclass DashManifestParser {\n  private _logger: any = getLogger('DashManifestParser');\n  private _xmlDoc!: Document;\n  private _adaptationSets: Array<AdaptationSet>;\n  private _baseURL!: string | null;\n\n  public static isValid(): boolean {\n    return !!(window.TextEncoder && window.TextDecoder);\n  }\n\n  constructor(manifest: ArrayBuffer | ArrayBufferView | string) {\n    this._logger.debug('Initialize manifest parser');\n    this._adaptationSets = [];\n    let xmlStr;\n    if (manifest instanceof ArrayBuffer) {\n      xmlStr = ParserUtils.BufferToStr(manifest);\n    } else {\n      xmlStr = manifest;\n    }\n    if (xmlStr) {\n      this._xmlDoc = XmlUtils.parseXml(xmlStr);\n    }\n  }\n\n  public parseManifest(): void {\n    try {\n      this._logger.debug('Start parsing dash manifest');\n      // For now parse only adaptation sets\n      this._parseAdaptionSets();\n      this._logger.debug('Manifest parsing finished successfully');\n    } catch (e) {\n      this._logger.warn('Manifest parsing failed', e);\n    }\n  }\n\n  // return the manifest BaseURL tag textvalue\n  public getBaseUrl(): string {\n    return this._baseURL || '';\n  }\n\n  public getImageSet(): AdaptationSet | undefined {\n    return this._adaptationSets.find((adaptationSet: AdaptationSet) => adaptationSet.contentType === AdaptationSet.ContentType.IMAGE);\n  }\n\n  public hasImageSet(): boolean {\n    return !!this.getImageSet();\n  }\n\n  public get adaptationSets(): Array<AdaptationSet> {\n    return this._adaptationSets;\n  }\n\n  private _parseAdaptionSets = (): void => {\n    const baseURL = XmlUtils.findElements(this._xmlDoc, MpdUtils.TagTypes.BASE_URL);\n    if (baseURL && baseURL.length > 0) {\n      if (baseURL[0].innerHTML) {\n        this._baseURL = baseURL[0].textContent;\n      }\n    }\n    const adaptationNodes = XmlUtils.findElements(this._xmlDoc, MpdUtils.TagTypes.ADAPTATION_SET);\n    // For now parse only image adaptation sets\n    const imageAdaptationsNodes = Array.from(adaptationNodes).filter(\n      adaptation => XmlUtils.parseAttr(adaptation, MpdUtils.AttributeTypes.CONTENT_TYPE) === AdaptationSet.ContentType.IMAGE\n    );\n    if (imageAdaptationsNodes.length > 0) {\n      this._adaptationSets = imageAdaptationsNodes.map(adaptation => new AdaptationSet(adaptation));\n      this._logger.debug('Found image adaptation set', this._adaptationSets);\n    } else {\n      this._logger.debug('No image adaptations were found in manifest');\n    }\n  };\n}\n\nexport {DashManifestParser};\n","import {AdaptationSet} from './parser/adaptation-set';\nimport {Representation} from './parser/representation';\nimport {UrlUtils} from './parser/parser-utils';\nimport {ImageTrack, ThumbnailInfo} from '@playkit-js/playkit-js';\nimport {EssentialProperty} from './parser/essential-property';\n\nclass DashThumbnailController {\n  private _tracks: Array<ImageTrack> = [];\n\n  constructor(set: AdaptationSet, playerUrl: string, mediaTemplatePrefix: string) {\n    this._parseTracks(set, playerUrl, mediaTemplatePrefix);\n    if (this._tracks.length > 0) {\n      this._tracks.sort((t1: ImageTrack, t2: ImageTrack) => t1.customData.bitrate - t2.customData.bitrate);\n      this.selectTrack(this._tracks[this._tracks.length - 1]);\n    }\n  }\n\n  public selectTrack(track: ImageTrack): void {\n    this._tracks.forEach((t: ImageTrack) => (t.index === track.index ? (t.active = true) : (t.active = false)));\n  }\n\n  public getTracks(): Array<ImageTrack> {\n    return this._tracks;\n  }\n\n  public getActiveTrack(): ImageTrack {\n    return this._tracks.find((t: ImageTrack) => t.active)!;\n  }\n\n  public getThumbnail(time: number): ThumbnailInfo {\n    const activeTrack = this.getActiveTrack();\n    const {duration, rows, cols, sliceWidth, sliceHeight, customData} = activeTrack;\n    const page = Math.floor(time / duration) + customData.startNumber;\n    const offset = time % duration;\n    const thumbIndex = Math.floor((offset * rows * cols) / duration);\n    return new ThumbnailInfo({\n      width: Math.floor(sliceWidth),\n      height: Math.floor(sliceHeight),\n      x: Math.floor(thumbIndex % cols) * sliceWidth,\n      y: Math.floor(thumbIndex / cols) * sliceHeight,\n      url: this._buildUrlFromTemplate(activeTrack, page)\n    });\n  }\n\n  private _parseTracks = (set: AdaptationSet, playerUrl: string, mediaTemplatePrefix: string): void => {\n    const {representations, segmentTemplate, essentialProperty} = set;\n    representations.forEach((representation: Representation, index: number) => {\n      const {id, bandwidth, width, height} = representation;\n      const {startNumber, duration, media, timescale, presentationTimeOffset} = segmentTemplate!;\n      const value = this._getEssentialValue(essentialProperty, representation);\n      const [rows, cols] = this._getDimensions(value);\n      this._tracks.push(\n        new ImageTrack({\n          id,\n          index,\n          active: false,\n          width,\n          height,\n          duration,\n          rows,\n          cols,\n          url: this._buildTemplateUrl(media, id, playerUrl, mediaTemplatePrefix),\n          customData: {\n            bitrate: bandwidth,\n            startNumber,\n            timescale,\n            presentationTimeOffset\n          }\n        })\n      );\n    });\n  };\n\n  private _getDimensions = (value: string): Array<number> => {\n    let rows = 1,\n      cols = 1;\n    if (value.includes('x')) {\n      const values = value.split('x');\n      cols = parseInt(values[0]);\n      rows = parseInt(values[1]);\n    }\n    return [rows, cols];\n  };\n\n  private _getEssentialValue = (essentialProperty: EssentialProperty | undefined, representation: Representation): string => {\n    return essentialProperty ? essentialProperty.value : representation.essentialProperty ? representation.essentialProperty.value : '';\n  };\n\n  private _buildTemplateUrl = (mediaTemplate: string, id: string, url: string, mediaTemplatePrefix: string): string => {\n    const last = url.split('/').pop()!;\n    const baseUrl = url.replace(last, '');\n    const regex = /^\\.\\/|^\\./;\n    mediaTemplatePrefix = mediaTemplatePrefix.replace(regex, '');\n    if (mediaTemplatePrefix.length > 0 && !mediaTemplatePrefix.endsWith('/')) {\n      mediaTemplatePrefix += '/';\n    }\n    const urlTemplate = `${baseUrl}${mediaTemplatePrefix}${mediaTemplate}`;\n    return UrlUtils.resolve(urlTemplate, {id});\n  };\n\n  private _buildUrlFromTemplate = (track: ImageTrack, index: number): string => {\n    return UrlUtils.resolve(track.url, {\n      index,\n      time: (index - 1) * track.duration * track.customData.timescale,\n      bitrate: track.customData.bitrate\n    });\n  };\n}\n\nexport {DashThumbnailController};\n","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import shaka from 'shaka-player';\nimport {\n  AudioTrack,\n  BaseMediaSourceAdapter,\n  Error,\n  EventType,\n  RequestType,\n  TextTrack as PKTextTrack,\n  Track,\n  TimedMetadata,\n  createTextTrackCue,\n  Utils,\n  VideoTrack,\n  ImageTrack,\n  ThumbnailInfo,\n  PKABRRestrictionObject,\n  filterTracksByRestriction,\n  PKDrmDataObject,\n  PKMediaSourceObject,\n  IMediaSourceAdapter,\n  FakeEvent,\n  IDrmProtocol,\n  PKResponseObject,\n  PKRequestObject,\n  PKDrmConfigObject\n} from '@playkit-js/playkit-js';\nimport {Widevine} from './drm/widevine';\nimport {PlayReady} from './drm/playready';\nimport DefaultConfig from './default-config.json';\nimport './assets/style.css';\nimport {DashManifestParser} from './parser/dash-manifest-parser';\nimport {DashThumbnailController} from './dash-thumbnail-controller';\n\ntype ShakaEventType = {[event: string]: string};\n\n/**\n * Shaka events enum\n * @type {Object}\n * @const\n */\nconst ShakaEvent: ShakaEventType = {\n  ERROR: 'error',\n  ADAPTATION: 'adaptation',\n  BUFFERING: 'buffering',\n  DRM_SESSION_UPDATE: 'drmsessionupdate',\n  EMSG: 'emsg'\n};\n\ntype ErrorEventsType = {[errorCode: string]: {timeStamp: number; count: number}};\n\n/**\n * the interval in which to sample player size changes\n * @type {number}\n * @const\n */\nconst ABR_RESTRICTION_UPDATE_INTERVAL = 1000;\n\n/**\n * the interval for stall detection in milliseconds\n * @type {number}\n * @const\n */\nconst STALL_DETECTION_INTERVAL = 500;\n\n/**\n * the minimal threshold for stall detection in seconds\n * @type {number}\n * @const\n */\nconst MIN_STALL_DETECTION_THRESHOLD = 2;\n\n/**\n * the threshold needed to break the stall\n * @type {number}\n * @const\n */\nconst STALL_BREAK_THRESHOLD = 0.1;\n\n/**\n * Adapter of shaka lib for dash content\n * @classdesc\n */\nexport default class DashAdapter extends BaseMediaSourceAdapter {\n  /**\n   * The id of Adapter\n   * @member {string} id\n   * @static\n   * @public\n   */\n  public static id = 'DashAdapter';\n  /**\n   * The adapter logger\n   * @member {any} _logger\n   * @private\n   * @static\n   */\n  protected static _logger = BaseMediaSourceAdapter.getLogger(DashAdapter.id);\n\n  public static textContainerClass = 'shaka-text-container';\n\n  /**\n   * The supported mime type by the dash adapter\n   * @member {string} _dashMimeType\n   * @static\n   * @private\n   */\n  private static _dashMimeType = 'application/dash+xml';\n\n  private static _hlsMimeTypes: Array<string> = [\n    'application/x-mpegurl',\n    'application/vnd.apple.mpegurl',\n    'audio/mpegurl',\n    'audio/x-mpegurl',\n    'video/x-mpegurl',\n    'video/mpegurl',\n    'application/mpegurl'\n  ];\n\n  /**\n   * The DRM protocols implementations for dash adapter.\n   * @type {Array<Function>}\n   * @private\n   * @static\n   */\n  private static _drmProtocols: Array<IDrmProtocol> = [Widevine, PlayReady];\n  /**\n   * The DRM protocols available for the current playback.\n   * @type {Array<Function>}\n   * @private\n   * @static\n   */\n  private static _availableDrmProtocol: Array<IDrmProtocol> = [];\n  /**\n   * The shaka Lib\n   * @member {any} _shakaLib\n   * @private\n   */\n  private _shakaLib: typeof shaka = shaka;\n  /**\n   * The shaka player instance\n   * @member {any} _shaka\n   * @private\n   */\n  private _shaka!: shaka.Player;\n  /**\n   * an object containing all the events we bind and unbind to.\n   * @member {Object} - _adapterEventsBindings\n   * @type {Object}\n   * @private\n   */\n  private _adapterEventsBindings: {[name: string]: (event: FakeEvent) => any} = {\n    [ShakaEvent.ERROR]: event => this._onError(event),\n    [ShakaEvent.ADAPTATION]: () => this._onAdaptation(),\n    [ShakaEvent.BUFFERING]: event => this._onBuffering(event),\n    [ShakaEvent.DRM_SESSION_UPDATE]: () => this._onDrmSessionUpdate(),\n    [ShakaEvent.EMSG]: event => this._onEmsg(event),\n    [EventType.WAITING]: () => this._onWaiting(),\n    [EventType.PLAYING]: () => this._onPlaying()\n  };\n  /**\n   * The buffering state flag\n   * @member {boolean} - _buffering\n   * @type {boolean}\n   * @private\n   */\n  private _buffering: boolean = false;\n  /**\n   * Whether 'waiting' event has been sent by the HTMLVideoElement\n   * @member {boolean} - _waitingSent\n   * @type {boolean}\n   * @private\n   */\n  private _waitingSent: boolean = false;\n  /**\n   * Whether 'playing' event has been sent by the HTMLVideoElement\n   * @member {boolean} - _playingSent\n   * @type {boolean}\n   * @private\n   */\n  private _playingSent: boolean = false;\n\n  /**\n   * Video size update timer\n   * @type {null|number}\n   * @private\n   */\n  private _videoSizeUpdateTimer: number | null = null;\n\n  /**\n   * stall interval to break the stall on Smart TV\n   * @type {null|IntervalID}\n   * @private\n   */\n  private _stallInterval: number | null = null;\n\n  /**\n   * 3016 is the number of the video error at shaka, we already listens to it in the html5 class\n   * @member {number} - VIDEO_ERROR_CODE\n   * @type {number}\n   * @private\n   */\n  public VIDEO_ERROR_CODE: number = 3016;\n  /**\n   * The last time detach occurred\n   * @type {number}\n   * @private\n   */\n  private _lastTimeDetach: number = NaN;\n  /**\n   * Whether the request filter threw an error\n   * @type {boolean}\n   * @private\n   */\n  private _requestFilterError: boolean = false;\n  /**\n   * Whether the response filter threw an error\n   * @type {boolean}\n   * @private\n   */\n  private _responseFilterError: boolean = false;\n  /**\n   * Whether async destroy is in progress\n   * @type {boolean}\n   * @private\n   */\n  private _isDestroyInProgress: boolean = false;\n  /**\n   * Custom dash manifest parser.\n   * @type {DashManifestParser}\n   * @private\n   */\n  private _manifestParser: DashManifestParser | null | undefined;\n\n  /**\n   * error counter to change severity\n   * @type ErrorEventsType\n   * @private\n   */\n  private _errorCounter: ErrorEventsType = {};\n  /**\n   * Dash thumbnail controller.\n   * @type {DashThumbnailController}\n   * @private\n   */\n  private _thumbnailController: DashThumbnailController | undefined | null;\n  private _isStartOver: boolean = true;\n  private _seekRangeStart: number = 0;\n  private _startOverTimeout!: number;\n  private _isLive: boolean = false;\n  private _isStaticLive: boolean = false;\n  private _selectedVideoTrack: VideoTrack | undefined | null = null;\n  private _playbackActualUri: string | undefined;\n\n  public applyTextTrackStyles(sheet: CSSStyleSheet, styles: any, containerId: string): void {\n    const flexAlignment = {\n      left: 'flex-start',\n      center: 'center',\n      right: 'flex-end'\n    };\n    sheet.insertRule(`#${containerId} .${DashAdapter.textContainerClass} { align-items: ${flexAlignment[styles.textAlign]}!important; }`, 0);\n    sheet.insertRule(`#${containerId} .${DashAdapter.textContainerClass} > * { ${styles.toCSS()} }`, 0);\n  }\n\n  /**\n   * Factory method to create media source adapter.\n   * @function createAdapter\n   * @param {HTMLVideoElement} videoElement - The video element that the media source adapter work with.\n   * @param {PKMediaSourceObject} source - The source Object.\n   * @param {Object} config - The player configuration.\n   * @returns {IMediaSourceAdapter} - New instance of the run time media source adapter.\n   * @static\n   */\n  public static createAdapter(videoElement: HTMLVideoElement, source: PKMediaSourceObject, config: any): IMediaSourceAdapter {\n    const adapterConfig: any = Utils.Object.copyDeep(DefaultConfig);\n    if (Utils.Object.hasPropertyPath(config, 'text.useNativeTextTrack')) {\n      adapterConfig.textTrackVisibile = Utils.Object.getPropertyPath(config, 'text.useNativeTextTrack');\n    }\n    if (Utils.Object.hasPropertyPath(config, 'text.useShakaTextTrackDisplay')) {\n      adapterConfig.useShakaTextTrackDisplay = Utils.Object.getPropertyPath(config, 'text.useShakaTextTrackDisplay');\n      adapterConfig.textTrackVisibile = adapterConfig.textTrackVisibile || adapterConfig.useShakaTextTrackDisplay;\n    }\n    if (Utils.Object.hasPropertyPath(config, 'streaming')) {\n      const {streaming} = config;\n      if (typeof streaming.forceBreakStall === 'boolean') {\n        adapterConfig.forceBreakStall = streaming.forceBreakStall;\n      }\n      if (typeof streaming.stallDetectionThreshold === 'number') {\n        adapterConfig.stallDetectionThreshold = Math.max(MIN_STALL_DETECTION_THRESHOLD, streaming.stallDetectionThreshold);\n      }\n\n      if (typeof streaming.lowLatencyMode === 'boolean') {\n        adapterConfig.lowLatencyMode = streaming.lowLatencyMode;\n      }\n      if (typeof streaming.trackEmsgEvents === 'boolean') {\n        adapterConfig.trackEmsgEvents = streaming.trackEmsgEvents;\n      }\n      if (typeof streaming.switchDynamicToStatic === 'boolean') {\n        adapterConfig.switchDynamicToStatic = streaming.switchDynamicToStatic;\n      }\n    }\n    if (Utils.Object.hasPropertyPath(config, 'sources.options')) {\n      const options = config.sources.options;\n      adapterConfig.forceRedirectExternalStreams = options.forceRedirectExternalStreams;\n      adapterConfig.redirectExternalStreamsHandler = options.redirectExternalStreamsHandler;\n      adapterConfig.redirectExternalStreamsTimeout = options.redirectExternalStreamsTimeout;\n    }\n    if (Utils.Object.hasPropertyPath(config, 'abr')) {\n      const abr = config.abr;\n      if (typeof abr.enabled === 'boolean') {\n        adapterConfig.shakaConfig.abr.enabled = abr.enabled;\n      }\n      if (typeof abr.capLevelToPlayerSize === 'boolean') {\n        adapterConfig.capLevelToPlayerSize = abr.capLevelToPlayerSize;\n      }\n      if (abr.defaultBandwidthEstimate) {\n        adapterConfig.shakaConfig.abr.defaultBandwidthEstimate = abr.defaultBandwidthEstimate;\n      }\n      if (abr.restrictions) {\n        Utils.Object.createPropertyPath(adapterConfig, 'abr.restrictions', abr.restrictions);\n      }\n    }\n\n    //Merge shaka config with override config, override takes precedence\n    if (Utils.Object.hasPropertyPath(config, 'playback.options.html5.dash')) {\n      Utils.Object.mergeDeep(adapterConfig.shakaConfig, config.playback.options.html5.dash);\n\n      //for backward compatibility with shaka version < 4\n      if (Utils.Object.hasPropertyPath(adapterConfig.shakaConfig, 'manifest.dash.defaultPresentationDelay')) {\n        adapterConfig.shakaConfig.manifest.defaultPresentationDelay = adapterConfig.shakaConfig.manifest.dash.defaultPresentationDelay;\n        delete adapterConfig.shakaConfig.manifest.dash.defaultPresentationDelay;\n      }\n    }\n    adapterConfig.network = config.network;\n    return new this(videoElement, source, adapterConfig);\n  }\n\n  /**\n   * Checks if dash adapter can play a given mime type\n   * @function canPlayType\n   * @param {string} mimeType - The mime type to check\n   * @returns {boolean} - Whether the dash adapter can play a specific mime type\n   * @static\n   */\n  public static canPlayType(mimeType: string): boolean {\n    const mimeTypes = [...DashAdapter._hlsMimeTypes];\n\n    const canPlayType = typeof mimeType === 'string' ? mimeTypes.includes(mimeType.toLowerCase()) && DashAdapter.isMSESupported() : false;\n    DashAdapter._logger.debug('canPlayType result for mimeType: ' + mimeType + ' is ' + canPlayType.toString());\n    return canPlayType;\n  }\n\n  /**\n   * set 'bitrate' the max bandwidth (if possible)\n   * @param {number} bitrate the max bitrate allowed\n   * @returns {void}\n   */\n  public setMaxBitrate(bitrate: number): void {\n    if (this._hasLowerOrEqualBitrate(bitrate)) {\n      this._shaka.configure({abr: {restrictions: {maxBandwidth: bitrate}}});\n    }\n  }\n\n  private _getSortedTracks(): Array<{id: number; bandwidth: number; active: boolean}> {\n    const tracks = this._shaka.getVariantTracks();\n    const sortedTracks = tracks\n      .map(obj => ({\n        id: obj.id,\n        bandwidth: obj.bandwidth,\n        active: obj.active\n      }))\n      .sort((obj1, obj2) => obj1.bandwidth - obj2.bandwidth);\n    return sortedTracks;\n  }\n\n  private _hasLowerOrEqualBitrate(maxBitrate: number): boolean {\n    const sortedTracks = this._getSortedTracks();\n    if (sortedTracks[0].bandwidth <= maxBitrate) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Checks if dash adapter can play a given drm data.\n   * @param {Array<Object>} drmData - The drm data to check.\n   * @param {PKDrmConfigObject} drmConfig - The drm config.\n   * @returns {boolean} - Whether the dash adapter can play a specific drm data.\n   * @static\n   */\n  public static canPlayDrm(drmData: Array<PKDrmDataObject>, drmConfig: PKDrmConfigObject): boolean {\n    DashAdapter._availableDrmProtocol = [];\n    for (const drmProtocol of DashAdapter._drmProtocols) {\n      if (drmProtocol.isConfigured(drmData, drmConfig)) {\n        DashAdapter._availableDrmProtocol.push(drmProtocol);\n        break;\n      }\n    }\n    if (!DashAdapter._availableDrmProtocol.length) {\n      for (const drmProtocol of DashAdapter._drmProtocols) {\n        if (drmProtocol.canPlayDrm(drmData)) {\n          DashAdapter._availableDrmProtocol.push(drmProtocol);\n        }\n      }\n    }\n\n    return !!DashAdapter._availableDrmProtocol.length;\n  }\n\n  /**\n   * Checks if the dash adapter is supported\n   * @function isSupported\n   * @returns {boolean} -  Whether dash is supported.\n   * @static\n   */\n  public static isSupported(): boolean {\n    const isSupported = shaka.Player.isBrowserSupported();\n    DashAdapter._logger.debug('isSupported:' + isSupported);\n    return isSupported;\n  }\n\n  /**\n   * @constructor\n   * @param {HTMLVideoElement} videoElement - The video element which bind to the dash adapter\n   * @param {PKMediaSourceObject} source - The source object\n   * @param {Object} config - The media source adapter configuration\n   */\n  constructor(videoElement: HTMLVideoElement, source: PKMediaSourceObject, config: any = {}) {\n    super(videoElement, source, config);\n    DashAdapter._logger.debug('Creating adapter. Shaka version: ' + shaka.Player.version);\n    this._config = Utils.Object.mergeDeep({}, DefaultConfig, this._config);\n    this._init();\n  }\n\n  /**\n   * Runs the initialization actions of the dash adapter.\n   * @private\n   * @returns {void}\n   */\n  private _init(): void {\n    //Need to call this again cause we are uninstalling the VTTCue polyfill to avoid collisions with other libs\n    shaka.polyfill.installAll();\n    this._shaka = new shaka.Player();\n    // This will force the player to use shaka UITextDisplayer plugin to render text tracks.\n    if (this._config.useShakaTextTrackDisplay) {\n      this._shaka.setVideoContainer(Utils.Dom.getElementBySelector('.playkit-subtitles'));\n    }\n    this._maybeSetFilters();\n    this._maybeSetDrmConfig();\n    this._maybeBreakStalls();\n    this._shaka.configure(this._config.shakaConfig);\n    this._addBindings();\n  }\n\n  private _clearStallInterval(): void {\n    if (this._stallInterval) {\n      clearInterval(this._stallInterval);\n      this._stallInterval = null;\n    }\n  }\n\n  private _stallHandler(): void {\n    this._clearStallInterval();\n\n    const getCurrentTimeInSeconds = (): number => {\n      return Date.now() / 1000;\n    };\n    const lastUpdateTime = getCurrentTimeInSeconds();\n    let lastCurrentTime = this._videoElement.currentTime;\n\n    this._stallInterval = window.setInterval(() => {\n      const stallSeconds = getCurrentTimeInSeconds() - lastUpdateTime;\n      //waiting for 3 sec until checking stalling\n      if (stallSeconds > this._config.stallDetectionThreshold && !this._videoElement.paused) {\n        if (lastCurrentTime === this._videoElement.currentTime) {\n          DashAdapter._logger.debug('stall found, break the stall');\n          this._videoElement.currentTime = parseFloat(this._videoElement.currentTime.toFixed(1)) + STALL_BREAK_THRESHOLD;\n        }\n        this._clearStallInterval();\n      }\n      lastCurrentTime = this._videoElement.currentTime;\n    }, STALL_DETECTION_INTERVAL);\n  }\n\n  /**\n   * register to event to break the stalls on smart TV\n   * @returns {void}\n   * @private\n   */\n  private _maybeBreakStalls(): void {\n    if (this._config.forceBreakStall) {\n      this._eventManager.listen(this._videoElement, EventType.SEEKING, () => this._stallHandler());\n    }\n  }\n\n  /**\n   * get the redirected URL\n   * @param {string} url - The url to check for redirection\n   * @returns {Promise<string>} - the resolved url\n   * @private\n   */\n  private _maybeGetRedirectedUrl(url: string): Promise<string> {\n    const shouldRedirect = this._config.forceRedirectExternalStreams;\n    const timeout = this._config.redirectExternalStreamsTimeout;\n    const callback = this._config.redirectExternalStreamsHandler;\n    return new Promise(resolve => {\n      if (!shouldRedirect) {\n        return resolve(url);\n      }\n      Utils.Http.jsonp(url, callback, {\n        timeout: timeout\n      })\n        .then(uri => {\n          resolve(uri);\n        })\n        .catch(() => resolve(url));\n    });\n  }\n\n  private _maybeSetFilters(): void {\n    if (typeof Utils.Object.getPropertyPath(this._config, 'network.requestFilter') === 'function') {\n      DashAdapter._logger.debug('Register request filter');\n      this._shaka.getNetworkingEngine()?.registerRequestFilter((type, request) => {\n        if (Object.values(RequestType).includes(type)) {\n          const pkRequest: PKRequestObject = {url: request.uris[0], body: request.body, headers: request.headers};\n          let requestFilterPromise;\n          try {\n            requestFilterPromise = this._config.network.requestFilter(type, pkRequest);\n          } catch (error) {\n            requestFilterPromise = Promise.reject(error);\n          }\n          requestFilterPromise = requestFilterPromise || Promise.resolve(pkRequest);\n          return requestFilterPromise\n            .then(updatedRequest => {\n              request.uris = [updatedRequest.url];\n              request.headers = updatedRequest.headers;\n              if (typeof updatedRequest.withCredentials === 'boolean') {\n                request.allowCrossSiteCredentials = updatedRequest.withCredentials;\n              }\n              if (request.method === 'POST') {\n                request.body = updatedRequest.body;\n              } else if (updatedRequest.body) {\n                DashAdapter._logger.warn(`Request with ${request.method} method cannot have body`);\n              }\n            })\n            .catch(error => {\n              this._requestFilterError = true;\n              throw error;\n            });\n        }\n      });\n    }\n    if (typeof Utils.Object.getPropertyPath(this._config, 'network.responseFilter') === 'function') {\n      DashAdapter._logger.debug('Register response filter');\n      this._shaka.getNetworkingEngine()?.registerResponseFilter((type, response) => {\n        if (Object.values(RequestType).includes(type)) {\n          const {uri: url, data, headers} = response;\n          const pkResponse: PKResponseObject = {url, originalUrl: this._sourceObj!.url, data, headers};\n          let responseFilterPromise;\n          try {\n            responseFilterPromise = this._config.network.responseFilter(type, pkResponse);\n          } catch (error) {\n            responseFilterPromise = Promise.reject(error);\n          }\n          responseFilterPromise = responseFilterPromise || Promise.resolve(pkResponse);\n          return responseFilterPromise\n            .then(updatedResponse => {\n              response.data = updatedResponse.data;\n            })\n            .catch(error => {\n              this._responseFilterError = true;\n              throw error;\n            });\n        }\n      });\n    }\n  }\n\n  /**\n   * Configure drm for shaka player.\n   * @private\n   * @returns {void}\n   */\n  private _maybeSetDrmConfig(): void {\n    if (this._sourceObj && this._sourceObj.drmData) {\n      const config: any = {};\n      for (const drmProtocol of DashAdapter._availableDrmProtocol) {\n        drmProtocol.setDrmPlayback(config, this._sourceObj.drmData);\n        // If shaka config already has some drm configuration override the config defaults with it\n        if (this._config.shakaConfig.drm) {\n          Utils.Object.mergeDeep(config.drm, this._config.shakaConfig.drm);\n        }\n        Utils.Object.mergeDeep(this._config.shakaConfig, config);\n      }\n    }\n  }\n\n  /**\n   * apply Capping to player size restrictions\n   * @private\n   * @returns {void}\n   */\n  private _maybeCapLevelToPlayerSize(): void {\n    if (this._config.capLevelToPlayerSize) {\n      const getRestrictions = (): any => {\n        return {\n          minHeight: 0,\n          maxHeight: this._videoHeight,\n          minWidth: 0,\n          maxWidth: this._videoWidth,\n          minBitrate: 0,\n          maxBitrate: Infinity\n        };\n      };\n      this._clearVideoUpdateTimer();\n      this._videoSizeUpdateTimer = window.setInterval(() => this._updateRestriction(getRestrictions()), ABR_RESTRICTION_UPDATE_INTERVAL);\n      this._updateRestriction(getRestrictions());\n    }\n  }\n\n  /**\n   * apply ABR restrictions\n   * @private\n   * @returns {void}\n   */\n  private _maybeApplyAbrRestrictions(): void {\n    if (!this._config.capLevelToPlayerSize) {\n      this._clearVideoUpdateTimer();\n      if (Utils.Object.hasPropertyPath(this._config, 'abr.restrictions')) {\n        this._updateRestriction(this._config.abr.restrictions);\n      }\n    }\n  }\n\n  /**\n   * apply ABR restrictions by size\n   * @private\n   * @param {PKABRRestrictionObject} restrictions - abr restrictions config\n   * @returns {void}\n   */\n  private _updateRestriction(restrictions: PKABRRestrictionObject): void {\n    const shakaRestrictionsConfig = this._getRestrictionShakaConfig(restrictions);\n    this._shaka.configure({\n      abr: {\n        restrictions: shakaRestrictionsConfig\n      }\n    });\n  }\n\n  private _getRestrictionShakaConfig(restrictions: PKABRRestrictionObject): any {\n    const getMinDimensions = (dim): number => {\n      const videoTracks = this._getVideoTracks();\n      return Math.min.apply(\n        null,\n        videoTracks.map(variant => variant[dim])\n      );\n    };\n    const restrictionsShakaConfig: any = {};\n    if (restrictions) {\n      const {maxHeight, maxWidth, maxBitrate, minHeight, minWidth, minBitrate} = restrictions;\n      const minHeightValue = Math.max(minHeight, 0);\n      const maxHeightValue = Math.max(maxHeight, getMinDimensions('height'));\n      if (maxHeightValue >= minHeightValue) {\n        restrictionsShakaConfig.minHeight = minHeightValue;\n        restrictionsShakaConfig.maxHeight = maxHeightValue;\n      } else {\n        DashAdapter._logger.warn('Invalid maxHeight restriction, maxHeight must be greater than minHeight', minHeight, maxHeight);\n      }\n      const minWidthValue = Math.max(minWidth, 0);\n      const maxWidthValue = Math.max(maxWidth, getMinDimensions('width'));\n      if (maxWidthValue >= minWidthValue) {\n        restrictionsShakaConfig.minWidth = minWidthValue;\n        restrictionsShakaConfig.maxWidth = maxWidthValue;\n      } else {\n        DashAdapter._logger.warn('Invalid maxWidth restriction, maxWidth must be greater than minWidth', minWidth, maxWidth);\n      }\n      const minBitrateValue = Math.max(minBitrate, 0);\n      const maxBitrateValue = Math.max(maxBitrate, getMinDimensions('bandwidth'));\n      if (maxBitrateValue >= minBitrateValue) {\n        restrictionsShakaConfig.minBandwidth = minBitrateValue;\n        restrictionsShakaConfig.maxBandwidth = maxBitrateValue;\n      } else {\n        DashAdapter._logger.warn('Invalid maxBitrate restriction, maxBitrate must be greater than minBitrate', minBitrate, maxBitrate);\n      }\n    }\n    return restrictionsShakaConfig;\n  }\n\n  /**\n   * attach media - return the media source to handle the video tag\n   * @public\n   * @returns {void}\n   */\n  public attachMediaSource(): void {\n    if (!this._shaka) {\n      if (this._videoElement && this._videoElement.src) {\n        Utils.Dom.setAttribute(this._videoElement, 'src', '');\n        Utils.Dom.removeAttribute(this._videoElement, 'src');\n      }\n      this._init();\n    }\n  }\n\n  /**\n   * detach media - will remove the media source from handling the video\n   * @public\n   * @returns {Promise<void>} - detach promise\n   */\n  public detachMediaSource(): Promise<void> {\n    if (this._shaka) {\n      // 1 second different between duration and current time will signal as end - will enable replay button\n      // @ts-expect-error - ????\n      if (Math.floor(this.duration - this.currentTime) === 0) {\n        this._lastTimeDetach = 0;\n      } else if (this['currentTime'] > 0) {\n        // @ts-expect-error - ????\n        this._lastTimeDetach = this.currentTime;\n      }\n      return this._reset().then(() => {\n        this._shaka = null as unknown as shaka.Player;\n        this._loadPromise = undefined;\n      });\n    } else {\n      return Promise.resolve();\n    }\n  }\n\n  /**\n   * Clear the video update timer\n   * @private\n   * @returns {void}\n   */\n  private _clearVideoUpdateTimer(): void {\n    if (this._videoSizeUpdateTimer) {\n      clearInterval(this._videoSizeUpdateTimer);\n      this._videoSizeUpdateTimer = null;\n    }\n  }\n\n  private get _videoWidth(): number {\n    let width;\n    const videoElement = this._videoElement;\n    if (videoElement) {\n      width = videoElement.width || videoElement.clientWidth || videoElement.offsetWidth;\n      width *= this._contentScaleFactor;\n    }\n    return width;\n  }\n\n  private get _videoHeight(): number {\n    let height;\n    const videoElement = this._videoElement;\n    if (videoElement) {\n      height = videoElement.height || videoElement.clientHeight || videoElement.offsetHeight;\n      height *= this._contentScaleFactor;\n    }\n    return height;\n  }\n\n  private get _contentScaleFactor(): number {\n    let pixelRatio = 1;\n    try {\n      pixelRatio = window.devicePixelRatio;\n    } catch (e) {\n      DashAdapter._logger.debug('failed reading devicePixelRatio, assume 1');\n    }\n    return pixelRatio;\n  }\n\n  /**\n   * Add the required bindings to shaka.\n   * @function _addBindings\n   * @private\n   * @returns {void}\n   */\n  private _addBindings(): void {\n    this._eventManager.listen(this._shaka, ShakaEvent.ADAPTATION, this._adapterEventsBindings.adaptation);\n    this._eventManager.listen(this._shaka, ShakaEvent.ERROR, this._adapterEventsBindings.error);\n    this._eventManager.listen(this._shaka, ShakaEvent.DRM_SESSION_UPDATE, this._adapterEventsBindings.drmsessionupdate);\n    this._eventManager.listen(this._videoElement, EventType.WAITING, this._adapterEventsBindings.waiting);\n    this._eventManager.listen(this._videoElement, EventType.PLAYING, this._adapterEventsBindings.playing);\n    this._eventManager.listen(this._videoElement, EventType.LOADED_DATA, () => this._onLoadedData());\n    this._eventManager.listenOnce(this._videoElement, EventType.PLAYING, () => {\n      this._eventManager.listen(this._shaka, ShakaEvent.BUFFERING, this._adapterEventsBindings.buffering);\n    });\n    if (this._config.trackEmsgEvents) {\n      this._eventManager.listen(this._shaka, ShakaEvent.EMSG, this._adapterEventsBindings.emsg);\n    }\n\n    // called when a resource is downloaded\n    this._shaka.getNetworkingEngine()?.registerResponseFilter((type, response) => {\n      switch (type) {\n        case shaka.net.NetworkingEngine.RequestType.SEGMENT:\n          this._trigger(EventType.FRAG_LOADED, {\n            miliSeconds: response.timeMs,\n            bytes: response.data.byteLength,\n            url: response.uri\n          });\n          if (this.isLive()) {\n            this._dispatchNativeEvent(EventType.DURATION_CHANGE);\n          }\n          break;\n        case shaka.net.NetworkingEngine.RequestType.MANIFEST:\n          this._parseManifest(response.data);\n          this._playbackActualUri = response.uri;\n          this._trigger(EventType.MANIFEST_LOADED, {miliSeconds: response.timeMs});\n          setTimeout(() => {\n            this._isLive = this._isLive || (this._shaka?.isLive() as boolean);\n            if (this._isLive && !this._shaka?.isLive() && !this._isStaticLive && this._config.switchDynamicToStatic) {\n              this._sourceObj!.url = response.uri;\n              this._switchFromDynamicToStatic();\n            }\n          });\n          break;\n      }\n    });\n  }\n\n  private _onLoadedData(): void {\n    this._setLowLatencyMode();\n    const segmentDuration = this.getSegmentDuration();\n    this._seekRangeStart = this._shaka.seekRange().start;\n    this._startOverTimeout = window.setTimeout(\n      () => {\n        if (this._shaka.seekRange().start - this._seekRangeStart >= segmentDuration) {\n          // in start over the seekRange().start should be permanent\n          this._isStartOver = false;\n        }\n      },\n      (segmentDuration + 1) * 1000\n    );\n  }\n\n  public async _switchFromDynamicToStatic(): Promise<void> {\n    DashAdapter._logger.info('Switching from dynamic manifest to static');\n    this._dispatchNativeEvent(EventType.WAITING);\n\n    const newCurrentTime = this._videoElement.currentTime - this._seekRangeStart;\n    const isAdaptiveBitrateEnabled = this.isAdaptiveBitrateEnabled();\n    const isPaused = this._videoElement.paused;\n\n    await this.detachMediaSource();\n\n    this._isStaticLive = true;\n    this._isLive = true;\n    this.attachMediaSource();\n\n    await this.load();\n\n    this._videoElement.currentTime = newCurrentTime;\n    if (!isPaused) {\n      this._videoElement.play();\n    }\n\n    if (isAdaptiveBitrateEnabled) {\n      this._onAdaptation();\n    } else if (this._selectedVideoTrack) {\n      this.selectVideoTrack(this._selectedVideoTrack);\n    }\n  }\n\n  private _setLowLatencyMode(): void {\n    this._shaka.configure({\n      streaming: {\n        lowLatencyMode: typeof this._config.lowLatencyMode === 'boolean' ? this._config.lowLatencyMode : this.isLive()\n      }\n    });\n  }\n\n  /**\n   * Custom parser to retrieve image adaptation sets.\n   * @param {ArrayBuffer} manifestBuffer - The array buffer manifest from the response.\n   * @function _parseManifest\n   * @private\n   * @returns {void}\n   */\n  private _parseManifest(manifestBuffer: ArrayBuffer | ArrayBufferView): void {\n    if (!this._manifestParser && DashManifestParser.isValid()) {\n      DashAdapter._logger.debug('Creating parser for the first time');\n      this._manifestParser = new DashManifestParser(manifestBuffer);\n      this._manifestParser.parseManifest();\n    }\n  }\n\n  /**\n   * Load the video source\n   * @param {number} startTime - Optional time to start the video from.\n   * @function load\n   * @override\n   */\n  public async load(startTime?: number): Promise<any> {\n    if (!this._loadPromise) {\n      await this._removeMediaKeys();\n      this._shaka.attach(this._videoElement);\n      this._loadPromise = new Promise((resolve, reject) => {\n        if (this._sourceObj && this._sourceObj.url) {\n          this._trigger(EventType.ABR_MODE_CHANGED, {mode: this.isAdaptiveBitrateEnabled() ? 'auto' : 'manual'});\n          let shakaStartTime = typeof startTime === 'number' && startTime > -1 ? startTime : undefined;\n          shakaStartTime = isNaN(this._lastTimeDetach) ? shakaStartTime : this._lastTimeDetach;\n          this._lastTimeDetach = NaN;\n          this._maybeGetRedirectedUrl(this._sourceObj.url)\n            .then(url => {\n              return this._shaka.load(url, shakaStartTime);\n            })\n            .then(() => {\n              const data = {tracks: this._getParsedTracks()};\n              this._maybeCapLevelToPlayerSize();\n              DashAdapter._logger.debug('The source has been loaded successfully');\n              resolve(data);\n            })\n            .catch(error => {\n              reject(new Error(this._isDestroyInProgress ? Error.Severity.RECOVERABLE : error.severity, error.category, error.code, error.data));\n            });\n        }\n      });\n    }\n    return this._loadPromise;\n  }\n\n  /**\n   * Destroys the dash adapter\n   * @function destroy\n   * @override\n   * @returns {Promise<*>} - The destroy promise.\n   */\n  public destroy(): Promise<void> {\n    this._isDestroyInProgress = true;\n    return new Promise((resolve, reject) => {\n      super.destroy().then(() => {\n        DashAdapter._logger.debug('destroy');\n        this._loadPromise = undefined;\n        this._adapterEventsBindings = {};\n        this._reset()\n          .then(resetResult => {\n            this._isDestroyInProgress = false;\n            resolve(resetResult);\n          })\n          .catch(error => {\n            this._isDestroyInProgress = false;\n            reject(error);\n          });\n      });\n    });\n  }\n\n  /**\n   *  Returns in-stream thumbnail for a chosen time.\n   * @param {number} time - playback time.\n   * @public\n   * @return {?ThumbnailInfo} - Thumbnail info\n   */\n  public getThumbnail(time: number): ThumbnailInfo | null {\n    if (this._thumbnailController) {\n      return this._thumbnailController.getThumbnail(time);\n    }\n    return null;\n  }\n\n  /**\n   * Reset shaka instance and its bindings\n   * @function _reset\n   * @private\n   * @returns {Promise<*>} - The destroy promise.\n   */\n  private _reset(): Promise<void> {\n    this._buffering = false;\n    this._waitingSent = false;\n    this._playingSent = false;\n    this._isLive = false;\n    this._isStaticLive = false;\n    this._requestFilterError = false;\n    this._responseFilterError = false;\n    this._manifestParser = null;\n    this._thumbnailController = null;\n    this._errorCounter = {};\n    this._clearStallInterval();\n    this._clearVideoUpdateTimer();\n    clearTimeout(this._startOverTimeout);\n    if (this._eventManager) {\n      this._eventManager.removeAll();\n    }\n    if (this._shaka) {\n      return this._shaka.destroy();\n    }\n    return Promise.resolve();\n  }\n\n  /**\n   * Remove mediaKeys from the video element.\n   * mediaKeys are set if an encrypted media was previously played, and must be removed before a new encrypted media can be played.\n   * If mediaKeys are not null it means that shaka reset wasn't called or that it failed to remove them.\n   * @returns {Promise<void>} Promise that resolves when the operation finishes.\n   */\n  public async _removeMediaKeys(): Promise<void> {\n    if (this._videoElement && this._videoElement.mediaKeys) {\n      try {\n        DashAdapter._logger.debug('Removing mediaKeys from the video element');\n        await this._videoElement.setMediaKeys(null);\n        DashAdapter._logger.debug('mediaKeys removed');\n      } catch (e) {\n        // non encrypted playback should still work, so we don't reject\n        DashAdapter._logger.warn('mediaKeys not cleared');\n      } finally {\n        // eslint-disable-next-line no-unsafe-finally\n        return Promise.resolve();\n      }\n    } else {\n      return Promise.resolve();\n    }\n  }\n\n  /**\n   * Get the original video tracks\n   * @function _getVideoTracks\n   * @returns {Array<Object>} - The original video tracks\n   * @private\n   */\n  private _getVideoTracks(): Array<any> {\n    const variantTracks = this._shaka.getVariantTracks();\n    const activeVariantTrack = this._getActiveTrack();\n    const videoTracks = variantTracks.filter(variantTrack => {\n      return variantTrack.audioId === activeVariantTrack.audioId;\n    });\n    return videoTracks;\n  }\n\n  private _getActiveTrack(): shaka.extern.Track {\n    return this._shaka.getVariantTracks().find(variantTrack => variantTrack.active)!;\n  }\n\n  /**\n   * Get the original audio tracks\n   * @function _getAudioTracks\n   * @returns {Array<Object>} - Array of objects with unique language and label.\n   * @private\n   */\n  private _getAudioTracks(): (shaka.extern.LanguageRole & {active: boolean; id: number})[] {\n    const variantTracks = this._shaka.getVariantTracks();\n    const audioTracks = this._shaka.getAudioLanguagesAndRoles();\n    audioTracks.forEach(track => {\n      const sameLangAudioVariants = variantTracks.filter(vt => vt.language === track.language);\n      const id = sameLangAudioVariants.map(variant => variant.id).join('_');\n      const active = sameLangAudioVariants.some(variant => variant.active);\n      track['id'] = id;\n      track.label = sameLangAudioVariants[0].label;\n      track['active'] = active;\n    });\n    return audioTracks as (shaka.extern.LanguageRole & {active: boolean; id: number})[];\n  }\n\n  /**\n   * Get the parsed tracks\n   * @function _getParsedTracks\n   * @returns {Array<Track>} - The parsed tracks\n   * @private\n   */\n  private _getParsedTracks(): Array<Track> {\n    if (this._shaka) {\n      const videoTracks = this._getParsedVideoTracks();\n      const audioTracks = this._getParsedAudioTracks();\n      const textTracks = this._getParsedTextTracks();\n      const imageTracks = this._getParsedImageTracks();\n      return [...videoTracks, ...audioTracks, ...textTracks, ...imageTracks];\n    }\n    return [];\n  }\n\n  /**\n   * Get the parsed video tracks\n   * @function _getParsedVideoTracks\n   * @returns {Array<VideoTrack>} - The parsed video tracks\n   * @private\n   */\n  private _getParsedVideoTracks(): VideoTrack[] {\n    const videoTracks = this._getVideoTracks();\n    const parsedTracks: VideoTrack[] = [];\n    if (videoTracks) {\n      for (let i = 0; i < videoTracks.length; i++) {\n        const settings = {\n          id: videoTracks[i].id,\n          bandwidth: videoTracks[i].videoBandwidth || videoTracks[i].bandwidth,\n          width: videoTracks[i].width,\n          height: videoTracks[i].height,\n          active: videoTracks[i].active,\n          index: i\n        };\n        parsedTracks.push(new VideoTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed audio tracks\n   * @function _getParsedAudioTracks\n   * @returns {Array<AudioTrack>} - The parsed audio tracks\n   * @private\n   */\n  private _getParsedAudioTracks(): AudioTrack[] {\n    const audioTracks = this._getAudioTracks();\n    const parsedTracks: AudioTrack[] = [];\n    if (audioTracks) {\n      for (let i = 0; i < audioTracks.length; i++) {\n        const settings = {\n          id: audioTracks[i].id,\n          active: audioTracks[i].active,\n          label: audioTracks[i].label,\n          language: audioTracks[i].language,\n          index: i\n        };\n        parsedTracks.push(new AudioTrack(settings));\n      }\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed text tracks\n   * @function _getParsedTextTracks\n   * @returns {Array<TextTrack>} - The parsed text tracks\n   * @private\n   */\n  private _getParsedTextTracks(): Array<PKTextTrack> {\n    const parsedTracks: PKTextTrack[] = [];\n    for (const textTrack of this._shaka.getTextTracks()) {\n      let kind = textTrack.kind ? textTrack.kind + 's' : '';\n      kind = kind === '' && this._config.useShakaTextTrackDisplay ? 'captions' : kind;\n      const settings = {\n        id: textTrack.id,\n        kind: kind,\n        active: false,\n        default: textTrack.primary,\n        label: textTrack.label as string,\n        language: textTrack.language\n      };\n      parsedTracks.push(new PKTextTrack(settings));\n    }\n    return parsedTracks;\n  }\n\n  /**\n   * Get the parsed image tracks\n   * @function _getParsedImageTracks\n   * @returns {Array<ImageTrack>} - The parsed image tracks\n   * @private\n   */\n  private _getParsedImageTracks(): ImageTrack[] {\n    const imageSet = this._manifestParser?.getImageSet();\n    const mediaTemplatePrefix = this._manifestParser?.getBaseUrl() || '';\n    if (imageSet) {\n      this._thumbnailController = new DashThumbnailController(imageSet, this._playbackActualUri!, mediaTemplatePrefix);\n      return this._thumbnailController.getTracks();\n    }\n    return [];\n  }\n\n  /**\n   * Select a video track\n   * @function selectVideoTrack\n   * @param {VideoTrack} videoTrack - the video track to select\n   * @returns {void}\n   * @public\n   */\n  public selectVideoTrack(videoTrack: VideoTrack): void {\n    if (this._shaka) {\n      const videoTracks = this._getVideoTracks();\n      if (videoTrack instanceof VideoTrack && videoTracks) {\n        const selectedVideoTrack = videoTracks[videoTrack.index];\n        if (selectedVideoTrack) {\n          if (this.isAdaptiveBitrateEnabled()) {\n            this._shaka.configure({abr: {enabled: false}});\n            this._trigger(EventType.ABR_MODE_CHANGED, {mode: 'manual'});\n          }\n          if (!selectedVideoTrack.active) {\n            this._selectedVideoTrack = videoTrack;\n            this._shaka.selectVariantTrack(videoTracks[videoTrack.index], true);\n            this._onTrackChanged(videoTrack);\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Select an audio track\n   * @function selectAudioTrack\n   * @param {AudioTrack} audioTrack - the audio track to select\n   * @returns {void}\n   * @public\n   */\n  public selectAudioTrack(audioTrack: AudioTrack): void {\n    if (this._shaka && audioTrack instanceof AudioTrack && !audioTrack.active) {\n      this._shaka.selectAudioLanguage(audioTrack.language);\n      this._onTrackChanged(audioTrack);\n    }\n  }\n\n  /**\n   * Select a text track\n   * @function selectTextTrack\n   * @param {TextTrack} textTrack - the track to select\n   * @returns {void}\n   * @public\n   */\n  public selectTextTrack(textTrack: PKTextTrack): void {\n    if (this._shaka && textTrack instanceof PKTextTrack && !textTrack.active && (textTrack.kind === 'subtitles' || textTrack.kind === 'captions')) {\n      this._shaka.setTextTrackVisibility(this._config.textTrackVisibile);\n      this._shaka.selectTextLanguage(textTrack.language);\n      this._onTrackChanged(textTrack);\n    }\n  }\n\n  public selectImageTrack(imageTrack: ImageTrack): void {\n    if (this._shaka && this._thumbnailController && imageTrack instanceof ImageTrack && !imageTrack.active) {\n      this._thumbnailController.selectTrack(imageTrack);\n      this._onTrackChanged(imageTrack);\n    }\n  }\n\n  /**\n   * Hide the text track\n   * @function hideTextTrack\n   * @returns {void}\n   * @public\n   */\n  public hideTextTrack(): void {\n    if (this._shaka) {\n      this._shaka.setTextTrackVisibility(false);\n    }\n  }\n\n  /**\n   * Enables adaptive bitrate switching\n   * @function enableAdaptiveBitrate\n   * @returns {void}\n   * @public\n   */\n  public enableAdaptiveBitrate(): void {\n    if (this._shaka && !this.isAdaptiveBitrateEnabled()) {\n      this._trigger(EventType.ABR_MODE_CHANGED, {mode: 'auto'});\n      this._shaka.configure({abr: {enabled: true}});\n    }\n  }\n\n  /**\n   * Checking if adaptive bitrate switching is enabled.\n   * @function isAdaptiveBitrateEnabled\n   * @returns {boolean} - Whether adaptive bitrate is enabled.\n   * @public\n   */\n  public isAdaptiveBitrateEnabled(): boolean {\n    if (this._shaka) {\n      const shakaConfig = this._shaka.getConfiguration();\n      return shakaConfig.abr.enabled;\n    }\n    return false;\n  }\n\n  /**\n   * Apply ABR restriction.\n   * @function applyABRRestriction\n   * @param {PKABRRestrictionObject} restrictions - abr restrictions config\n   * @returns {void}\n   * @public\n   */\n  public applyABRRestriction(restrictions: PKABRRestrictionObject): void {\n    Utils.Object.createPropertyPath(this._config, 'abr.restrictions', restrictions);\n    this._maybeApplyAbrRestrictions();\n    if (!this.isAdaptiveBitrateEnabled()) {\n      const videoTracks = this._getParsedVideoTracks();\n      const availableTracks = filterTracksByRestriction(videoTracks, this._config.abr.restrictions);\n      if (availableTracks.length) {\n        const activeTrackInRange = availableTracks.find(track => track.active);\n        if (!activeTrackInRange) {\n          this.selectVideoTrack(availableTracks[0]);\n        }\n      }\n    }\n  }\n\n  /**\n   * Returns the live edge\n   * @returns {number} - live edge\n   * @private\n   */\n  protected _getLiveEdge(): number {\n    return this._shaka ? this._shaka.seekRange().end : NaN;\n  }\n\n  /**\n   * Seeking to live edge.\n   * @function seekToLiveEdge\n   * @returns {void}\n   * @public\n   */\n  public seekToLiveEdge(): void {\n    if (this._shaka && this._videoElement.readyState > 0) {\n      this._videoElement.currentTime = this._getLiveEdge();\n    }\n  }\n\n  /**\n   * Checking if the current playback is live.\n   * @function isLive\n   * @returns {boolean} - Whether playback is live.\n   * @public\n   */\n  public isLive(): boolean {\n    return this._shaka?.isLive() || this._isLive;\n  }\n\n  /**\n   * Gets the segment duration of the stream\n   * @return {number} - Segment duration in seconds\n   */\n  public get liveDuration(): number {\n    return this._getLiveEdge();\n  }\n\n  /**\n   * Gets the live duration\n   * @return {number} - live duration\n   */\n  public getSegmentDuration(): number {\n    if (this._shaka) {\n      return this._shaka.getStats().maxSegmentDuration;\n    }\n    return 0;\n  }\n\n  /**\n   * An handler to shaka adaptation event\n   * @function _onAdaptation\n   * @returns {void}\n   * @private\n   */\n  private _onAdaptation(): void {\n    const selectedVideoTrack = this._getParsedVideoTracks().find(videoTrack => videoTrack.active)!;\n    this._onTrackChanged(selectedVideoTrack);\n  }\n\n  /**\n   * An handler to shaka error event\n   * @function _onError\n   * @param {any} event - the error event\n   * @returns {void}\n   * @private\n   */\n  private _onError(event: any): void {\n    if (event && event.detail) {\n      let error = event.detail;\n      //don't handle video element errors, they are already handled by the player\n      if (error.code === this.VIDEO_ERROR_CODE) {\n        return;\n      }\n      if ((this._requestFilterError || this._responseFilterError) && error.data[0] instanceof shaka.util.Error) {\n        // When the request/response filter of the license request throws an error,\n        // shaka wraps the request/response filter error (code 1006/1007) with a license request error (code 6007)\n        // so extract the inner error\n        error = error.data[0];\n        this._requestFilterError ? (this._requestFilterError = false) : (this._responseFilterError = false);\n      }\n\n      error.severity = this._shouldErrorChangeSeverity(error.code) ? Error.Severity.CRITICAL : error.severity;\n      this._trigger(EventType.ERROR, new Error(error.severity, error.category, error.code, error.data));\n      DashAdapter._logger.error(error);\n\n      if (error.severity === Error.Severity.CRITICAL) {\n        this.destroy();\n      }\n    }\n  }\n\n  private _shouldErrorChangeSeverity(errorCode): boolean {\n    const secondsErrorRepeat = 30;\n    const errorsCounterToChangeSeverity = 3;\n    const getCurrentTimeInSeconds = (): number => {\n      return Date.now() / 1000;\n    };\n    if (!(errorCode in this._errorCounter)) {\n      this._errorCounter[errorCode] = {\n        count: 1,\n        timeStamp: getCurrentTimeInSeconds()\n      };\n      return false;\n    }\n\n    this._errorCounter[errorCode].count += 1;\n    if (this._errorCounter[errorCode].count > errorsCounterToChangeSeverity) {\n      delete this._errorCounter[errorCode];\n      return true;\n    }\n\n    const interval = getCurrentTimeInSeconds() - this._errorCounter[errorCode].timeStamp;\n    if (interval > secondsErrorRepeat) {\n      this._errorCounter[errorCode].timeStamp = getCurrentTimeInSeconds();\n      this._errorCounter[errorCode].count = 1;\n      return false;\n    }\n    return false;\n  }\n\n  /**\n   * An handler to shaka buffering event\n   * @function _onBuffering\n   * @param {any} event - the buffering event\n   * @returns {void}\n   * @private\n   */\n  private _onBuffering(event: any): void {\n    if (event.buffering) {\n      if (!this._waitingSent) {\n        // The player enters the buffering state and 'waiting' event hasn't been sent by the HTMLVideoElement.\n        this._dispatchNativeEvent(EventType.WAITING);\n        this._buffering = true;\n      }\n    } else {\n      this._buffering = false;\n      if (!this._videoElement.paused && !this._playingSent) {\n        //the player leaves the buffering state. and 'playing' event hasn't been sent by the HTMLVideoElement.\n        this._dispatchNativeEvent(EventType.PLAYING);\n      }\n    }\n  }\n\n  private _dispatchNativeEvent(type: string): void {\n    let event;\n    if (typeof window['Event'] === 'function') {\n      event = new Event(type);\n    } else {\n      event = document.createEvent('Event');\n      event.initEvent(type, true, true);\n    }\n    this._videoElement.dispatchEvent(event);\n  }\n\n  /**\n   * An handler to shaka drm session update event\n   * @function _onDrmSessionUpdate\n   * @returns {void}\n   * @private\n   */\n  private _onDrmSessionUpdate(): void {\n    this._trigger(EventType.DRM_LICENSE_LOADED, {\n      licenseTime: this._shaka.getStats().licenseTime,\n      scheme: this._shaka.drmInfo()?.keySystem\n    });\n  }\n\n  /**\n   * An handler to shaka emsg event\n   * @function _onEmsg\n   * @param {any} event - the emsg event\n   * @returns {void}\n   * @private\n   */\n  private _onEmsg(event: any): void {\n    const {detail, type} = event;\n    let metadataTrack = Array.from<TextTrack>(this._videoElement.textTracks).find(track => track.label === type);\n    if (!metadataTrack) {\n      metadataTrack = this._videoElement.addTextTrack(PKTextTrack.KIND.METADATA, type);\n    }\n    const {startTime, endTime, id, ...metadata} = detail;\n\n    const timedMetadata = new TimedMetadata(startTime, endTime, id, TimedMetadata.TYPE.EMSG, metadata);\n    const textTrackCue = createTextTrackCue(timedMetadata);\n    metadataTrack.addCue(textTrackCue!);\n    this._trigger(EventType.TIMED_METADATA_ADDED, {cues: [timedMetadata]});\n  }\n\n  /**\n   * An handler to HTMLVideoElement waiting event\n   * @function _onWaiting\n   * @returns {void}\n   * @private\n   */\n  private _onWaiting(): void {\n    this._waitingSent = true;\n    this._playingSent = false;\n  }\n\n  /**\n   * An handler to HTMLVideoElement playing event\n   * @function _onPlaying\n   * @returns {void}\n   * @private\n   */\n  private _onPlaying(): void {\n    this._playingSent = true;\n    this._waitingSent = false;\n    if (this._buffering) {\n      // The player is in buffering state.\n      this._dispatchNativeEvent(EventType.WAITING);\n    }\n  }\n\n  /**\n   * Get the start time of DVR window in live playback in seconds.\n   * @returns {Number} - start time of DVR window.\n   * @public\n   */\n  public getStartTimeOfDvrWindow(): number {\n    if (this.isLive() && this._shaka) {\n      return (this._isStartOver ? this._seekRangeStart : this._shaka.seekRange().start) + this._shaka.getConfiguration().streaming.safeSeekOffset;\n    }\n    return 0;\n  }\n\n  /**\n   * gets the target buffer of the player\n   * @returns {number} - buffer length target in seconds\n   */\n  public get targetBuffer(): number {\n    let targetBufferVal = NaN;\n    if (!this._shaka) return NaN;\n    if (this.isLive()) {\n      targetBufferVal = this._getLiveEdge() - this._videoElement.currentTime;\n    } else {\n      // consideration of the end of the playback in the target buffer calc\n      targetBufferVal = this._videoElement.duration - this._videoElement.currentTime;\n    }\n\n    targetBufferVal = Math.min(targetBufferVal, this._shaka.getConfiguration().streaming.bufferingGoal + this._shaka.getStats().maxSegmentDuration);\n    return targetBufferVal;\n  }\n\n  public getDrmInfo(): PKDrmDataObject | null {\n    const drmInfo = this._shaka.drmInfo();\n    if (!drmInfo) {\n      return null;\n    } else {\n      const {licenseServerUri, keySystem, serverCertificateUri} = drmInfo;\n      const drmDataObject: PKDrmDataObject = {\n        licenseUrl: licenseServerUri,\n        scheme: keySystem\n      };\n      if (serverCertificateUri) drmDataObject.certificate = serverCertificateUri;\n      return drmDataObject;\n    }\n  }\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}","import {registerMediaSourceAdapter} from '@playkit-js/playkit-js';\nimport DashAdapter from './dash-adapter';\n\nconst VERSION = __VERSION__;\nconst NAME = __NAME__;\n\nexport default DashAdapter;\nexport {VERSION, NAME};\n\n// Register DashAdapter to the media source adapter manager\nif (DashAdapter.isSupported()) {\n  registerMediaSourceAdapter(DashAdapter);\n}\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__952__","__WEBPACK_EXTERNAL_MODULE__475__","___CSS_LOADER_EXPORT___","push","id","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","_typeof","_regeneratorRuntime","__esModule","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","Symbol","a","iterator","c","asyncIterator","u","toStringTag","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","key","get","prop","nc","_arrayLikeToArray","arr","len","arr2","Array","_unsupportedIterableToArray","minLen","from","test","_toConsumableArray","isArray","iter","asyncGeneratorStep","gen","reject","_next","_throw","info","error","_asyncToGenerator","fn","args","arguments","err","_classCallCheck","instance","Constructor","toPropertyKey","toPrimitive","String","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_assertThisInitialized","ReferenceError","_getPrototypeOf","bind","_get","Reflect","property","receiver","object","desc","getOwnPropertyDescriptor","_setPrototypeOf","_defineProperty","Widevine","_class","drmData","drmConfig","DrmScheme","WIDEVINE","keySystem","find","drmEntry","scheme","_logger","debug","config","browser","Env","wwDrmEntry","drm","servers","licenseUrl","advanced","videoRobustness","audioRobustness","getLogger","PlayReady","PLAYREADY","prDrmEntry","locals","SegmentTemplate","elem","_media","XmlUtils","parseAttr","MpdUtils","AttributeTypes","MEDIA","_startNumber","START_NUMBER","parseInt","_duration","DURATION","parseFloat","_timescale","TIMESCALE","parsePositiveInt","_presentationTimeOffset","PRESENTATION_TIME_OFFSET","_endNumber","END_NUMBER","REPRESENTATION","NUMBER","BANDWIDTH","TIME","UrlUtils","url","bitrate","time","expressions","match","replaceTokens","exp","token","replace","MediaTemplateType","TagTypes","BASE_URL","SEGMENT_TEMPLATE","ESSENTIAL_PROPERTY","ADAPTATION_SET","ID","CONTENT_TYPE","MIME_TYPE","WIDTH","HEIGHT","SCHEME_ID_URI","VALUE","parseXml","text","DOMParser","parseFromString","parseFunction","defaultValue","parsedValue","getAttribute","findElements","node","getElementsByTagName","findChild","children","findChildren","childNodes","filter","child","Element","tagName","intString","Number","floatString","EssentialProperty","_schemeIdUri","_value","Representation","_id","_bandwidth","_width","_height","essPropElem","_essentialProperty","AdaptationSet","_mimeType","_contentType","_representations","repElem","segTempElem","_segmentTemplate","VIDEO","AUDIO","TEXT","IMAGE","DashManifestParser","manifest","xmlStr","buffer","_this","baseURL","_xmlDoc","innerHTML","_baseURL","textContent","adaptationNodes","imageAdaptationsNodes","adaptation","ContentType","_adaptationSets","ArrayBuffer","TextDecoder","decode","Uint8Array","_parseAdaptionSets","warn","adaptationSet","contentType","getImageSet","TextEncoder","DashThumbnailController","set","playerUrl","mediaTemplatePrefix","representations","segmentTemplate","essentialProperty","representation","bandwidth","width","height","_ref","startNumber","duration","timescale","presentationTimeOffset","_getEssentialValue","_this$_getDimensions2","_getDimensions","rows","cols","_tracks","ImageTrack","active","_buildTemplateUrl","customData","includes","split","mediaTemplate","last","baseUrl","endsWith","urlTemplate","track","_parseTracks","sort","t1","t2","selectTrack","activeTrack","getActiveTrack","sliceWidth","sliceHeight","page","Math","floor","offset","thumbIndex","ThumbnailInfo","x","_buildUrlFromTemplate","ShakaEvent","DashAdapter","_BaseMediaSourceAdapt","subClass","superClass","_inherits","_removeMediaKeys2","_load","_switchFromDynamicToStatic2","_super","videoElement","source","shaka","event","_onError","_onAdaptation","_onBuffering","_onDrmSessionUpdate","_onEmsg","EventType","WAITING","_onWaiting","PLAYING","_onPlaying","NaN","version","_config","Utils","mergeDeep","DefaultConfig","_init","sheet","styles","containerId","insertRule","textContainerClass","left","center","right","textAlign","toCSS","_hasLowerOrEqualBitrate","_shaka","configure","abr","restrictions","maxBandwidth","getVariantTracks","obj1","obj2","maxBitrate","_getSortedTracks","installAll","useShakaTextTrackDisplay","setVideoContainer","Dom","getElementBySelector","_maybeSetFilters","_maybeSetDrmConfig","_maybeBreakStalls","shakaConfig","_addBindings","_stallInterval","clearInterval","_this2","_clearStallInterval","getCurrentTimeInSeconds","Date","now","lastUpdateTime","lastCurrentTime","_videoElement","currentTime","setInterval","stallDetectionThreshold","paused","toFixed","_this3","forceBreakStall","_eventManager","listen","SEEKING","_stallHandler","shouldRedirect","forceRedirectExternalStreams","timeout","redirectExternalStreamsTimeout","callback","redirectExternalStreamsHandler","Http","jsonp","uri","catch","_this$_shaka$getNetwo","_this$_shaka$getNetwo2","_this4","getPropertyPath","getNetworkingEngine","registerRequestFilter","request","RequestType","requestFilterPromise","pkRequest","uris","body","headers","network","requestFilter","updatedRequest","withCredentials","allowCrossSiteCredentials","_requestFilterError","registerResponseFilter","response","responseFilterPromise","pkResponse","originalUrl","_sourceObj","responseFilter","updatedResponse","_responseFilterError","_step","_iterator","_createForOfIteratorHelper","_availableDrmProtocol","setDrmPlayback","_this5","capLevelToPlayerSize","getRestrictions","minHeight","maxHeight","_videoHeight","minWidth","maxWidth","_videoWidth","minBitrate","Infinity","_clearVideoUpdateTimer","_videoSizeUpdateTimer","_updateRestriction","hasPropertyPath","shakaRestrictionsConfig","_getRestrictionShakaConfig","_this6","getMinDimensions","dim","videoTracks","_getVideoTracks","min","variant","restrictionsShakaConfig","minHeightValue","max","maxHeightValue","minWidthValue","maxWidthValue","minBitrateValue","maxBitrateValue","minBandwidth","src","removeAttribute","_this7","_lastTimeDetach","_reset","_loadPromise","clientWidth","offsetWidth","_contentScaleFactor","clientHeight","offsetHeight","pixelRatio","devicePixelRatio","_this$_shaka$getNetwo3","_this8","_adapterEventsBindings","drmsessionupdate","waiting","playing","LOADED_DATA","_onLoadedData","listenOnce","buffering","trackEmsgEvents","emsg","NetworkingEngine","SEGMENT","_trigger","FRAG_LOADED","miliSeconds","timeMs","bytes","byteLength","isLive","_dispatchNativeEvent","DURATION_CHANGE","MANIFEST","_parseManifest","_playbackActualUri","MANIFEST_LOADED","setTimeout","_this8$_shaka","_this8$_shaka2","_isLive","_isStaticLive","switchDynamicToStatic","_switchFromDynamicToStatic","_this9","_setLowLatencyMode","segmentDuration","getSegmentDuration","_seekRangeStart","seekRange","start","_startOverTimeout","_isStartOver","_callee","newCurrentTime","isAdaptiveBitrateEnabled","isPaused","_context","detachMediaSource","attachMediaSource","load","play","_selectedVideoTrack","selectVideoTrack","streaming","lowLatencyMode","manifestBuffer","_manifestParser","isValid","parseManifest","_callee2","startTime","_this10","_context2","_removeMediaKeys","attach","ABR_MODE_CHANGED","mode","shakaStartTime","_maybeGetRedirectedUrl","tracks","_getParsedTracks","_maybeCapLevelToPlayerSize","_isDestroyInProgress","Severity","RECOVERABLE","severity","category","code","_x","_this11","resetResult","_thumbnailController","getThumbnail","_buffering","_waitingSent","_playingSent","_errorCounter","clearTimeout","removeAll","destroy","_callee3","_context3","mediaKeys","setMediaKeys","t0","variantTracks","activeVariantTrack","_getActiveTrack","variantTrack","audioId","audioTracks","getAudioLanguagesAndRoles","sameLangAudioVariants","vt","language","some","label","_getParsedVideoTracks","_getParsedAudioTracks","textTracks","_getParsedTextTracks","imageTracks","_getParsedImageTracks","parsedTracks","settings","videoBandwidth","VideoTrack","_getAudioTracks","AudioTrack","_step2","_iterator2","getTextTracks","textTrack","kind","default","primary","PKTextTrack","_this$_manifestParser","_this$_manifestParser2","imageSet","getBaseUrl","getTracks","videoTrack","selectedVideoTrack","enabled","selectVariantTrack","_onTrackChanged","audioTrack","selectAudioLanguage","setTextTrackVisibility","textTrackVisibile","selectTextLanguage","imageTrack","getConfiguration","createPropertyPath","_maybeApplyAbrRestrictions","availableTracks","filterTracksByRestriction","end","readyState","_getLiveEdge","_this$_shaka","getStats","maxSegmentDuration","detail","VIDEO_ERROR_CODE","_shouldErrorChangeSeverity","CRITICAL","ERROR","errorCode","timeStamp","Event","createEvent","initEvent","dispatchEvent","_this$_shaka$drmInfo","DRM_LICENSE_LOADED","licenseTime","drmInfo","metadataTrack","addTextTrack","KIND","METADATA","endTime","metadata","excluded","sourceKeys","indexOf","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_objectWithoutProperties","_excluded","timedMetadata","TimedMetadata","TYPE","EMSG","textTrackCue","createTextTrackCue","addCue","TIMED_METADATA_ADDED","cues","safeSeekOffset","targetBufferVal","bufferingGoal","licenseServerUri","serverCertificateUri","drmDataObject","certificate","adapterConfig","copyDeep","sources","defaultBandwidthEstimate","playback","html5","dash","defaultPresentationDelay","mimeType","mimeTypes","_hlsMimeTypes","canPlayType","toLowerCase","isMSESupported","_step3","_iterator3","_drmProtocols","drmProtocol","isConfigured","_step4","_iterator4","canPlayDrm","isSupported","isBrowserSupported","BaseMediaSourceAdapter","VERSION","__VERSION__","NAME","__NAME__","registerMediaSourceAdapter"],"sourceRoot":""}